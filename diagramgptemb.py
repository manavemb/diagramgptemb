import streamlit as st
from anthropic import Anthropic
from diagrams import Diagram
from io import BytesIO, StringIO
import base64
import sys
import traceback
import os
import tempfile
import re

# Initialize Anthropic client
try:
    client = Anthropic(api_key=st.secrets["ANTHROPIC_API_KEY"])
except KeyError:
    st.error("API key for Anthropic is missing. Please add the ANTHROPIC_API_KEY to Streamlit secrets.")
    st.stop()
except Exception as e:
    st.error(f"Failed to initialize Anthropic client: {str(e)}")
    st.stop()

# Comprehensive AWS components dictionary
AWS_COMPONENTS = {
   "Analytics": {
       "Analytics": "diagrams.aws.analytics.Analytics",
       "Athena": "diagrams.aws.analytics.Athena",
       "CloudsearchSearchDocuments": "diagrams.aws.analytics.CloudsearchSearchDocuments",
       "Cloudsearch": "diagrams.aws.analytics.Cloudsearch",
       "DataLakeResource": "diagrams.aws.analytics.DataLakeResource",
       "DataPipeline": "diagrams.aws.analytics.DataPipeline",
       "ElasticsearchService": "diagrams.aws.analytics.ElasticsearchService",
       "EMRCluster": "diagrams.aws.analytics.EMRCluster",
       "EMREngineMaprM3": "diagrams.aws.analytics.EMREngineMaprM3",
       "EMREngineMaprM5": "diagrams.aws.analytics.EMREngineMaprM5",
       "EMREngineMaprM7": "diagrams.aws.analytics.EMREngineMaprM7",
       "EMREngine": "diagrams.aws.analytics.EMREngine",
       "EMRHdfsCluster": "diagrams.aws.analytics.EMRHdfsCluster",
       "EMR": "diagrams.aws.analytics.EMR",
       "GlueCrawlers": "diagrams.aws.analytics.GlueCrawlers",
       "GlueDataCatalog": "diagrams.aws.analytics.GlueDataCatalog",
       "Glue": "diagrams.aws.analytics.Glue",
       "KinesisDataAnalytics": "diagrams.aws.analytics.KinesisDataAnalytics",
       "KinesisDataFirehose": "diagrams.aws.analytics.KinesisDataFirehose",
       "KinesisDataStreams": "diagrams.aws.analytics.KinesisDataStreams",
       "KinesisVideoStreams": "diagrams.aws.analytics.KinesisVideoStreams",
       "Kinesis": "diagrams.aws.analytics.Kinesis",
       "LakeFormation": "diagrams.aws.analytics.LakeFormation",
       "ManagedStreamingForKafka": "diagrams.aws.analytics.ManagedStreamingForKafka",
       "Quicksight": "diagrams.aws.analytics.Quicksight",
       "RedshiftDenseComputeNode": "diagrams.aws.analytics.RedshiftDenseComputeNode",
       "RedshiftDenseStorageNode": "diagrams.aws.analytics.RedshiftDenseStorageNode",
       "Redshift": "diagrams.aws.analytics.Redshift"
   },
   "AR": {
       "ArVr": "diagrams.aws.ar.ArVr",
       "Sumerian": "diagrams.aws.ar.Sumerian"
   },
   "Blockchain": {
       "BlockchainResource": "diagrams.aws.blockchain.BlockchainResource",
       "Blockchain": "diagrams.aws.blockchain.Blockchain",
       "ManagedBlockchain": "diagrams.aws.blockchain.ManagedBlockchain",
       "QuantumLedgerDatabaseQldb": "diagrams.aws.blockchain.QuantumLedgerDatabaseQldb"
   },
   "Business": {
       "AlexaForBusiness": "diagrams.aws.business.AlexaForBusiness",
       "BusinessApplications": "diagrams.aws.business.BusinessApplications",
       "Chime": "diagrams.aws.business.Chime",
       "Workmail": "diagrams.aws.business.Workmail"
   },
   "Compute": {
       "AppRunner": "diagrams.aws.compute.AppRunner",
       "ApplicationAutoScaling": "diagrams.aws.compute.ApplicationAutoScaling",
       "Batch": "diagrams.aws.compute.Batch",
       "ComputeOptimizer": "diagrams.aws.compute.ComputeOptimizer",
       "Compute": "diagrams.aws.compute.Compute",
       "EC2Ami": "diagrams.aws.compute.EC2Ami",
       "EC2AutoScaling": "diagrams.aws.compute.EC2AutoScaling",
       "EC2ContainerRegistryImage": "diagrams.aws.compute.EC2ContainerRegistryImage",
       "EC2ContainerRegistryRegistry": "diagrams.aws.compute.EC2ContainerRegistryRegistry",
       "EC2ContainerRegistry": "diagrams.aws.compute.EC2ContainerRegistry",
       "EC2ElasticIpAddress": "diagrams.aws.compute.EC2ElasticIpAddress",
       "EC2ImageBuilder": "diagrams.aws.compute.EC2ImageBuilder",
       "EC2Instance": "diagrams.aws.compute.EC2Instance",
       "EC2Instances": "diagrams.aws.compute.EC2Instances",
       "EC2Rescue": "diagrams.aws.compute.EC2Rescue",
       "EC2SpotInstance": "diagrams.aws.compute.EC2SpotInstance",
       "EC2": "diagrams.aws.compute.EC2",
       "ElasticBeanstalkApplication": "diagrams.aws.compute.ElasticBeanstalkApplication",
       "ElasticBeanstalkDeployment": "diagrams.aws.compute.ElasticBeanstalkDeployment",
       "ElasticBeanstalk": "diagrams.aws.compute.ElasticBeanstalk",
       "ElasticContainerServiceContainer": "diagrams.aws.compute.ElasticContainerServiceContainer",
       "ElasticContainerServiceService": "diagrams.aws.compute.ElasticContainerServiceService",
       "ElasticContainerService": "diagrams.aws.compute.ElasticContainerService",
       "ElasticKubernetesService": "diagrams.aws.compute.ElasticKubernetesService",
       "Fargate": "diagrams.aws.compute.Fargate",
       "LambdaFunction": "diagrams.aws.compute.LambdaFunction",
       "Lambda": "diagrams.aws.compute.Lambda",
       "Lightsail": "diagrams.aws.compute.Lightsail",
       "LocalZones": "diagrams.aws.compute.LocalZones",
       "Outposts": "diagrams.aws.compute.Outposts",
       "ServerlessApplicationRepository": "diagrams.aws.compute.ServerlessApplicationRepository",
       "ThinkboxDeadline": "diagrams.aws.compute.ThinkboxDeadline",
       "ThinkboxDraft": "diagrams.aws.compute.ThinkboxDraft",
       "ThinkboxFrost": "diagrams.aws.compute.ThinkboxFrost",
       "ThinkboxKrakatoa": "diagrams.aws.compute.ThinkboxKrakatoa",
       "ThinkboxSequoia": "diagrams.aws.compute.ThinkboxSequoia",
       "ThinkboxStoke": "diagrams.aws.compute.ThinkboxStoke",
       "ThinkboxXmesh": "diagrams.aws.compute.ThinkboxXmesh",
       "VmwareCloudOnAWS": "diagrams.aws.compute.VmwareCloudOnAWS",
       "Wavelength": "diagrams.aws.compute.Wavelength"
   },
   "Cost": {
       "Budgets": "diagrams.aws.cost.Budgets",
       "CostAndUsageReport": "diagrams.aws.cost.CostAndUsageReport",
       "CostExplorer": "diagrams.aws.cost.CostExplorer",
       "CostManagement": "diagrams.aws.cost.CostManagement",
       "ReservedInstanceReporting": "diagrams.aws.cost.ReservedInstanceReporting",
       "SavingsPlans": "diagrams.aws.cost.SavingsPlans"
   },
   "Database": {
       "AuroraInstance": "diagrams.aws.database.AuroraInstance",
       "Aurora": "diagrams.aws.database.Aurora",
       "DatabaseMigrationServiceDatabaseMigrationWorkflow": "diagrams.aws.database.DatabaseMigrationServiceDatabaseMigrationWorkflow",
       "DatabaseMigrationService": "diagrams.aws.database.DatabaseMigrationService",
       "Database": "diagrams.aws.database.Database",
       "DocumentdbMongodbCompatibility": "diagrams.aws.database.DocumentdbMongodbCompatibility",
       "DynamodbAttribute": "diagrams.aws.database.DynamodbAttribute",
       "DynamodbAttributes": "diagrams.aws.database.DynamodbAttributes",
       "DynamodbDax": "diagrams.aws.database.DynamodbDax",
       "DynamodbGlobalSecondaryIndex": "diagrams.aws.database.DynamodbGlobalSecondaryIndex",
       "DynamodbItem": "diagrams.aws.database.DynamodbItem",
       "DynamodbItems": "diagrams.aws.database.DynamodbItems",
       "DynamodbTable": "diagrams.aws.database.DynamodbTable",
       "Dynamodb": "diagrams.aws.database.Dynamodb",
       "ElasticacheCacheNode": "diagrams.aws.database.ElasticacheCacheNode",
       "ElasticacheForMemcached": "diagrams.aws.database.ElasticacheForMemcached",
       "ElasticacheForRedis": "diagrams.aws.database.ElasticacheForRedis",
       "Elasticache": "diagrams.aws.database.Elasticache",
       "KeyspacesManagedApacheCassandraService": "diagrams.aws.database.KeyspacesManagedApacheCassandraService",
       "Neptune": "diagrams.aws.database.Neptune",
       "QuantumLedgerDatabaseQldb": "diagrams.aws.database.QuantumLedgerDatabaseQldb",
       "RDSInstance": "diagrams.aws.database.RDSInstance",
       "RDSMariadbInstance": "diagrams.aws.database.RDSMariadbInstance",
       "RDSMysqlInstance": "diagrams.aws.database.RDSMysqlInstance",
       "RDSOnVmware": "diagrams.aws.database.RDSOnVmware",
       "RDSOracleInstance": "diagrams.aws.database.RDSOracleInstance",
       "RDSPostgresqlInstance": "diagrams.aws.database.RDSPostgresqlInstance",
       "RDSSqlServerInstance": "diagrams.aws.database.RDSSqlServerInstance",
       "RDS": "diagrams.aws.database.RDS",
       "RedshiftDenseComputeNode": "diagrams.aws.database.RedshiftDenseComputeNode",
       "RedshiftDenseStorageNode": "diagrams.aws.database.RedshiftDenseStorageNode",
       "Redshift": "diagrams.aws.database.Redshift",
       "Timestream": "diagrams.aws.database.Timestream"
   },
   "DevTools": {
       "CloudDevelopmentKit": "diagrams.aws.devtools.CloudDevelopmentKit",
       "Cloud9Resource": "diagrams.aws.devtools.Cloud9Resource",
       "Cloud9": "diagrams.aws.devtools.Cloud9",
       "Codebuild": "diagrams.aws.devtools.Codebuild",
       "Codecommit": "diagrams.aws.devtools.Codecommit",
       "Codedeploy": "diagrams.aws.devtools.Codedeploy",
       "Codepipeline": "diagrams.aws.devtools.Codepipeline",
       "Codestar": "diagrams.aws.devtools.Codestar",
       "CommandLineInterface": "diagrams.aws.devtools.CommandLineInterface",
       "DeveloperTools": "diagrams.aws.devtools.DeveloperTools",
       "ToolsAndSdks": "diagrams.aws.devtools.ToolsAndSdks",
       "XRay": "diagrams.aws.devtools.XRay"
   },
   "Enablement": {
       "CustomerEnablement": "diagrams.aws.enablement.CustomerEnablement",
       "Iq": "diagrams.aws.enablement.Iq",
       "ManagedServices": "diagrams.aws.enablement.ManagedServices",
       "ProfessionalServices": "diagrams.aws.enablement.ProfessionalServices",
       "Support": "diagrams.aws.enablement.Support"
   },
   "EndUser": {
       "Appstream20": "diagrams.aws.enduser.Appstream20",
       "DesktopAndAppStreaming": "diagrams.aws.enduser.DesktopAndAppStreaming",
       "Workdocs": "diagrams.aws.enduser.Workdocs",
       "Worklink": "diagrams.aws.enduser.Worklink",
       "Workspaces": "diagrams.aws.enduser.Workspaces"
   },
   "Engagement": {
       "Connect": "diagrams.aws.engagement.Connect",
       "CustomerEngagement": "diagrams.aws.engagement.CustomerEngagement",
       "Pinpoint": "diagrams.aws.engagement.Pinpoint",
       "SimpleEmailServiceSesEmail": "diagrams.aws.engagement.SimpleEmailServiceSesEmail",
       "SimpleEmailServiceSes": "diagrams.aws.engagement.SimpleEmailServiceSes"
   },
   "Game": {
       "GameTech": "diagrams.aws.game.GameTech",
       "Gamelift": "diagrams.aws.game.Gamelift"
   },
   "General": {
       "Client": "diagrams.aws.general.Client",
       "Disk": "diagrams.aws.general.Disk",
       "Forums": "diagrams.aws.general.Forums",
       "General": "diagrams.aws.general.General",
       "GenericDatabase": "diagrams.aws.general.GenericDatabase",
       "GenericFirewall": "diagrams.aws.general.GenericFirewall",
       "GenericOfficeBuilding": "diagrams.aws.general.GenericOfficeBuilding",
       "GenericSamlToken": "diagrams.aws.general.GenericSamlToken",
       "GenericSDK": "diagrams.aws.general.GenericSDK",
       "InternetAlt1": "diagrams.aws.general.InternetAlt1",
       "InternetAlt2": "diagrams.aws.general.InternetAlt2",
       "InternetGateway": "diagrams.aws.general.InternetGateway",
       "Marketplace": "diagrams.aws.general.Marketplace",
       "MobileClient": "diagrams.aws.general.MobileClient",
       "Multimedia": "diagrams.aws.general.Multimedia",
       "OfficeBuilding": "diagrams.aws.general.OfficeBuilding",
       "SamlToken": "diagrams.aws.general.SamlToken",
       "SDK": "diagrams.aws.general.SDK",
       "SslPadlock": "diagrams.aws.general.SslPadlock",
       "TapeStorage": "diagrams.aws.general.TapeStorage",
       "Toolkit": "diagrams.aws.general.Toolkit",
       "TraditionalServer": "diagrams.aws.general.TraditionalServer",
       "User": "diagrams.aws.general.User",
       "Users": "diagrams.aws.general.Users"
   },
   "Integration": {
       "ApplicationIntegration": "diagrams.aws.integration.ApplicationIntegration",
       "Appsync": "diagrams.aws.integration.Appsync",
       "ConsoleMobileApplication": "diagrams.aws.integration.ConsoleMobileApplication",
       "EventResource": "diagrams.aws.integration.EventResource",
       "EventbridgeCustomEventBusResource": "diagrams.aws.integration.EventbridgeCustomEventBusResource",
       "EventbridgeDefaultEventBusResource": "diagrams.aws.integration.EventbridgeDefaultEventBusResource",
       "EventbridgeSaasPartnerEventBusResource": "diagrams.aws.integration.EventbridgeSaasPartnerEventBusResource",
       "Eventbridge": "diagrams.aws.integration.Eventbridge",
       "ExpressWorkflows": "diagrams.aws.integration.ExpressWorkflows",
       "MQ": "diagrams.aws.integration.MQ",
       "SimpleNotificationServiceSnsEmailNotification": "diagrams.aws.integration.SimpleNotificationServiceSnsEmailNotification",
       "SimpleNotificationServiceSnsHttpNotification": "diagrams.aws.integration.SimpleNotificationServiceSnsHttpNotification",
       "SimpleNotificationServiceSnsTopic": "diagrams.aws.integration.SimpleNotificationServiceSnsTopic",
       "SimpleNotificationServiceSns": "diagrams.aws.integration.SimpleNotificationServiceSns",
       "SimpleQueueServiceSqsMessage": "diagrams.aws.integration.SimpleQueueServiceSqsMessage",
       "SimpleQueueServiceSqsQueue": "diagrams.aws.integration.SimpleQueueServiceSqsQueue",
       "SimpleQueueServiceSqs": "diagrams.aws.integration.SimpleQueueServiceSqs",
       "StepFunctions": "diagrams.aws.integration.StepFunctions"
   },
   "IoT": {
       "Freertos": "diagrams.aws.iot.Freertos",
       "InternetOfThings": "diagrams.aws.iot.InternetOfThings",
       "Iot1Click": "diagrams.aws.iot.Iot1Click",
       "IotAction": "diagrams.aws.iot.IotAction",
       "IotActuator": "diagrams.aws.iot.IotActuator",
       "IotAlexaEcho": "diagrams.aws.iot.IotAlexaEcho",
       "IotAlexaEnabledDevice": "diagrams.aws.iot.IotAlexaEnabledDevice",
       "IotAlexaSkill": "diagrams.aws.iot.IotAlexaSkill",
       "IotAlexaVoiceService": "diagrams.aws.iot.IotAlexaVoiceService",
       "IotAnalyticsChannel": "diagrams.aws.iot.IotAnalyticsChannel",
       "IotAnalyticsDataSet": "diagrams.aws.iot.IotAnalyticsDataSet",
       "IotAnalyticsDataStore": "diagrams.aws.iot.IotAnalyticsDataStore",
       "IotAnalyticsNotebook": "diagrams.aws.iot.IotAnalyticsNotebook",
       "IotAnalyticsPipeline": "diagrams.aws.iot.IotAnalyticsPipeline",
       "IotAnalytics": "diagrams.aws.iot.IotAnalytics",
       "IotButton": "diagrams.aws.iot.IotButton",
       "IotCamera": "diagrams.aws.iot.IotCamera",
       "IotCertificate": "diagrams.aws.iot.IotCertificate",
       "IotCore": "diagrams.aws.iot.IotCore",
       "IotDeviceDefender": "diagrams.aws.iot.IotDeviceDefender",
       "IotDeviceManagement": "diagrams.aws.iot.IotDeviceManagement",
       "IotEvents": "diagrams.aws.iot.IotEvents",
       "IotGreengrassConnector": "diagrams.aws.iot.IotGreengrassConnector",
       "IotGreengrass": "diagrams.aws.iot.IotGreengrass",
       "IotHardwareBoard": "diagrams.aws.iot.IotHardwareBoard",
       "IotJobs": "diagrams.aws.iot.IotJobs",
       "IotMqtt": "diagrams.aws.iot.IotMqtt",
       "IotPolicy": "diagrams.aws.iot.IotPolicy",
       "IotRule": "diagrams.aws.iot.IotRule",
       "IotSitewise": "diagrams.aws.iot.IotSitewise",
       "IotThingsGraph": "diagrams.aws.iot.IotThingsGraph",
       "IotTopic": "diagrams.aws.iot.IotTopic"
   },
   "Management": {
       "AutoScaling": "diagrams.aws.management.AutoScaling",
       "Cloudformation": "diagrams.aws.management.Cloudformation",
       "Cloudtrail": "diagrams.aws.management.Cloudtrail",
       "Cloudwatch": "diagrams.aws.management.Cloudwatch",
       "Codeguru": "diagrams.aws.management.Codeguru",
       "CommandLineInterface": "diagrams.aws.management.CommandLineInterface",
       "Config": "diagrams.aws.management.Config",
       "ControlTower": "diagrams.aws.management.ControlTower",
       "LicenseManager": "diagrams.aws.management.LicenseManager",
       "ManagedServices": "diagrams.aws.management.ManagedServices",
       "ManagementConsole": "diagrams.aws.management.ManagementConsole",
       "Organizations": "diagrams.aws.management.Organizations",
       "ServiceCatalog": "diagrams.aws.management.ServiceCatalog",
       "SystemsManager": "diagrams.aws.management.SystemsManager",
       "TrustedAdvisor": "diagrams.aws.management.TrustedAdvisor",
       "WellArchitectedTool": "diagrams.aws.management.WellArchitectedTool"
   },
   "Media": {
       "ElasticTranscoder": "diagrams.aws.media.ElasticTranscoder",
       "ElementalConductor": "diagrams.aws.media.ElementalConductor",
       "ElementalDelta": "diagrams.aws.media.ElementalDelta",
       "ElementalLive": "diagrams.aws.media.ElementalLive",
       "ElementalMediaconnect": "diagrams.aws.media.ElementalMediaconnect",
       "ElementalMediaconvert": "diagrams.aws.media.ElementalMediaconvert",
       "ElementalMedialive": "diagrams.aws.media.ElementalMedialive",
       "ElementalMediapackage": "diagrams.aws.media.ElementalMediapackage",
       "ElementalMediastore": "diagrams.aws.media.ElementalMediastore",
       "ElementalMediatailor": "diagrams.aws.media.ElementalMediatailor",
       "ElementalServer": "diagrams.aws.media.ElementalServer",
       "KinesisVideoStreams": "diagrams.aws.media.KinesisVideoStreams",
       "MediaServices": "diagrams.aws.media.MediaServices"
   },
   "Migration": {
       "ApplicationDiscoveryService": "diagrams.aws.migration.ApplicationDiscoveryService",
       "CloudendureMigration": "diagrams.aws.migration.CloudendureMigration",
       "DatabaseMigrationService": "diagrams.aws.migration.DatabaseMigrationService",
       "Datasync": "diagrams.aws.migration.Datasync",
       "MigrationAndTransfer": "diagrams.aws.migration.MigrationAndTransfer",
       "MigrationHub": "diagrams.aws.migration.MigrationHub",
       "ServerMigrationService": "diagrams.aws.migration.ServerMigrationService",
       "SnowballEdge": "diagrams.aws.migration.SnowballEdge",
       "Snowball": "diagrams.aws.migration.Snowball",
       "Snowmobile": "diagrams.aws.migration.Snowmobile",
       "TransferForSftp": "diagrams.aws.migration.TransferForSftp"
   },
   "ML": {
       "ApacheMxnetOnAWS": "diagrams.aws.ml.ApacheMxnetOnAWS",
       "AugmentedAi": "diagrams.aws.ml.AugmentedAi",
       "Comprehend": "diagrams.aws.ml.Comprehend",
       "DeepLearningAmis": "diagrams.aws.ml.DeepLearningAmis",
       "DeepLearningContainers": "diagrams.aws.ml.DeepLearningContainers",
       "Deepcomposer": "diagrams.aws.ml.Deepcomposer",
       "Deeplens": "diagrams.aws.ml.Deeplens",
       "Deepracer": "diagrams.aws.ml.Deepracer",
       "ElasticInference": "diagrams.aws.ml.ElasticInference",
       "Forecast": "diagrams.aws.ml.Forecast",
       "FraudDetector": "diagrams.aws.ml.FraudDetector",
       "Kendra": "diagrams.aws.ml.Kendra",
       "Lex": "diagrams.aws.ml.Lex",
       "MachineLearning": "diagrams.aws.ml.MachineLearning",
       "Personalize": "diagrams.aws.ml.Personalize",
       "Polly": "diagrams.aws.ml.Polly",
       "Rekognition": "diagrams.aws.ml.Rekognition",
       "SagemakerGroundTruth": "diagrams.aws.ml.SagemakerGroundTruth",
       "SagemakerModel": "diagrams.aws.ml.SagemakerModel",
       "SagemakerNotebook": "diagrams.aws.ml.SagemakerNotebook",
       "SagemakerTrainingJob": "diagrams.aws.ml.SagemakerTrainingJob",
       "Sagemaker": "diagrams.aws.ml.Sagemaker",
       "TensorflowOnAWS": "diagrams.aws.ml.TensorflowOnAWS",
       "Textract": "diagrams.aws.ml.Textract",
       "Transcribe": "diagrams.aws.ml.Transcribe",
       "Translate": "diagrams.aws.ml.Translate"
   },
   "Network": {
       "APIGateway": "diagrams.aws.network.APIGateway",
       "AppMesh": "diagrams.aws.network.AppMesh",
       "ClientVpn": "diagrams.aws.network.ClientVpn",
       "CloudMap": "diagrams.aws.network.CloudMap",
       "CloudFront": "diagrams.aws.network.CloudFront",
       "DirectConnect": "diagrams.aws.network.DirectConnect",
       "ElasticLoadBalancing": "diagrams.aws.network.ElasticLoadBalancing",
       "GlobalAccelerator": "diagrams.aws.network.GlobalAccelerator",
       "PrivateSubnet": "diagrams.aws.network.PrivateSubnet",
       "Privatelink": "diagrams.aws.network.Privatelink",
       "PublicSubnet": "diagrams.aws.network.PublicSubnet",
       "Route53": "diagrams.aws.network.Route53",
       "SiteToSiteVpn": "diagrams.aws.network.SiteToSiteVpn",
       "TransitGateway": "diagrams.aws.network.TransitGateway",
       "VPC": "diagrams.aws.network.VPC",
       "VpnConnection": "diagrams.aws.network.VpnConnection",
       "VpnGateway": "diagrams.aws.network.VpnGateway"
   },
   "Security": {
       "Artifact": "diagrams.aws.security.Artifact",
       "CertificateManager": "diagrams.aws.security.CertificateManager",
       "CloudDirectory": "diagrams.aws.security.CloudDirectory",
       "Cognito": "diagrams.aws.security.Cognito",
       "DirectoryService": "diagrams.aws.security.DirectoryService",
       "FirewallManager": "diagrams.aws.security.FirewallManager",
       "Guardduty": "diagrams.aws.security.Guardduty",
       "IdentityAndAccessManagementIam": "diagrams.aws.security.IdentityAndAccessManagementIam",
       "Inspector": "diagrams.aws.security.Inspector",
       "KeyManagementService": "diagrams.aws.security.KeyManagementService",
       "Macie": "diagrams.aws.security.Macie",
       "ResourceAccessManager": "diagrams.aws.security.ResourceAccessManager",
       "SecretsManager": "diagrams.aws.security.SecretsManager",
       "SecurityHub": "diagrams.aws.security.SecurityHub",
       "Shield": "diagrams.aws.security.Shield",
       "SingleSignOn": "diagrams.aws.security.SingleSignOn",
       "WAF": "diagrams.aws.security.WAF"
   },
   "Storage": {
       "Backup": "diagrams.aws.storage.Backup",
       "CloudendureDisasterRecovery": "diagrams.aws.storage.CloudendureDisasterRecovery",
       "EFSInfrequentaccessPrimaryBg": "diagrams.aws.storage.EFSInfrequentaccessPrimaryBg",
       "EFSStandardPrimaryBg": "diagrams.aws.storage.EFSStandardPrimaryBg",
       "ElasticBlockStoreEBS": "diagrams.aws.storage.ElasticBlockStoreEBS",
       "ElasticFileSystemEFS": "diagrams.aws.storage.ElasticFileSystemEFS",
       "FsxForLustre": "diagrams.aws.storage.FsxForLustre",
       "FsxForWindowsFileServer": "diagrams.aws.storage.FsxForWindowsFileServer",
       "Fsx": "diagrams.aws.storage.Fsx",
       "S3Glacier": "diagrams.aws.storage.S3Glacier",
       "SimpleStorageServiceS3": "diagrams.aws.storage.SimpleStorageServiceS3",
       "SnowballEdge": "diagrams.aws.storage.SnowballEdge",
       "Snowball": "diagrams.aws.storage.Snowball",
       "Snowmobile": "diagrams.aws.storage.Snowmobile",
       "StorageGateway": "diagrams.aws.storage.StorageGateway",
       "Storage": "diagrams.aws.storage.Storage"
   }
}



# Comprehensive Azure components dictionary
AZURE_COMPONENTS = {
   "Analytics": {
       "AnalysisServices": "diagrams.azure.analytics.AnalysisServices",
       "DataExplorerClusters": "diagrams.azure.analytics.DataExplorerClusters",
       "DataFactories": "diagrams.azure.analytics.DataFactories",
       "DataLakeAnalytics": "diagrams.azure.analytics.DataLakeAnalytics",
       "DataLakeStoreGen1": "diagrams.azure.analytics.DataLakeStoreGen1",
       "Databricks": "diagrams.azure.analytics.Databricks",
       "EventHubClusters": "diagrams.azure.analytics.EventHubClusters",
       "EventHubs": "diagrams.azure.analytics.EventHubs",
       "Hdinsightclusters": "diagrams.azure.analytics.Hdinsightclusters",
       "LogAnalyticsWorkspaces": "diagrams.azure.analytics.LogAnalyticsWorkspaces",
       "StreamAnalyticsJobs": "diagrams.azure.analytics.StreamAnalyticsJobs",
       "SynapseAnalytics": "diagrams.azure.analytics.SynapseAnalytics"
   },
   "Compute": {
       "AppServices": "diagrams.azure.compute.AppServices",
       "AutomanagedVM": "diagrams.azure.compute.AutomanagedVM",
       "AvailabilitySets": "diagrams.azure.compute.AvailabilitySets",
       "BatchAccounts": "diagrams.azure.compute.BatchAccounts",
       "CitrixVirtualDesktopsEssentials": "diagrams.azure.compute.CitrixVirtualDesktopsEssentials",
       "CloudServicesClassic": "diagrams.azure.compute.CloudServicesClassic",
       "CloudServices": "diagrams.azure.compute.CloudServices",
       "CloudsimpleVirtualMachines": "diagrams.azure.compute.CloudsimpleVirtualMachines",
       "ContainerInstances": "diagrams.azure.compute.ContainerInstances",
       "ContainerRegistries": "diagrams.azure.compute.ContainerRegistries",
       "DiskEncryptionSets": "diagrams.azure.compute.DiskEncryptionSets",
       "DiskSnapshots": "diagrams.azure.compute.DiskSnapshots",
       "Disks": "diagrams.azure.compute.Disks",
       "FunctionApps": "diagrams.azure.compute.FunctionApps",
       "ImageDefinitions": "diagrams.azure.compute.ImageDefinitions",
       "ImageVersions": "diagrams.azure.compute.ImageVersions",
       "KubernetesServices": "diagrams.azure.compute.KubernetesServices",
       "MeshApplications": "diagrams.azure.compute.MeshApplications",
       "OsImages": "diagrams.azure.compute.OsImages",
       "SAPHANAOnAzure": "diagrams.azure.compute.SAPHANAOnAzure",
       "ServiceFabricClusters": "diagrams.azure.compute.ServiceFabricClusters",
       "SharedImageGalleries": "diagrams.azure.compute.SharedImageGalleries",
       "SpringCloud": "diagrams.azure.compute.SpringCloud",
       "VMClassic": "diagrams.azure.compute.VMClassic",
       "VMImages": "diagrams.azure.compute.VMImages",
       "VMLinux": "diagrams.azure.compute.VMLinux",
       "VMScaleSet": "diagrams.azure.compute.VMScaleSet",
       "VMWindows": "diagrams.azure.compute.VMWindows",
       "VM": "diagrams.azure.compute.VM",
       "Workspaces": "diagrams.azure.compute.Workspaces"
   },
   "Database": {
       "BlobStorage": "diagrams.azure.database.BlobStorage",
       "CacheForRedis": "diagrams.azure.database.CacheForRedis",
       "CosmosDb": "diagrams.azure.database.CosmosDb",
       "DataExplorerClusters": "diagrams.azure.database.DataExplorerClusters",
       "DataFactory": "diagrams.azure.database.DataFactory",
       "DatabaseForMariadbServers": "diagrams.azure.database.DatabaseForMariadbServers",
       "DatabaseForMysqlServers": "diagrams.azure.database.DatabaseForMysqlServers",
       "DatabaseForPostgresqlServers": "diagrams.azure.database.DatabaseForPostgresqlServers",
       "ElasticDatabasePools": "diagrams.azure.database.ElasticDatabasePools",
       "ElasticJobAgents": "diagrams.azure.database.ElasticJobAgents",
       "InstancePools": "diagrams.azure.database.InstancePools",
       "ManagedDatabases": "diagrams.azure.database.ManagedDatabases",
       "SQLDatabases": "diagrams.azure.database.SQLDatabases",
       "SQLDatawarehouse": "diagrams.azure.database.SQLDatawarehouse",
       "SQLManagedInstances": "diagrams.azure.database.SQLManagedInstances",
       "SQLServerStretchDatabases": "diagrams.azure.database.SQLServerStretchDatabases",
       "SQLServers": "diagrams.azure.database.SQLServers",
       "SQLVM": "diagrams.azure.database.SQLVM",
       "SQL": "diagrams.azure.database.SQL",
       "SsisLiftAndShiftIr": "diagrams.azure.database.SsisLiftAndShiftIr",
       "SynapseAnalytics": "diagrams.azure.database.SynapseAnalytics",
       "VirtualClusters": "diagrams.azure.database.VirtualClusters",
       "VirtualDatacenter": "diagrams.azure.database.VirtualDatacenter"
   },
   "DevOps": {
       "ApplicationInsights": "diagrams.azure.devops.ApplicationInsights",
       "Artifacts": "diagrams.azure.devops.Artifacts",
       "Boards": "diagrams.azure.devops.Boards",
       "Devops": "diagrams.azure.devops.Devops",
       "DevtestLabs": "diagrams.azure.devops.DevtestLabs",
       "LabServices": "diagrams.azure.devops.LabServices",
       "Pipelines": "diagrams.azure.devops.Pipelines",
       "Repos": "diagrams.azure.devops.Repos",
       "TestPlans": "diagrams.azure.devops.TestPlans"
   },
   "General": {
       "Allresources": "diagrams.azure.general.Allresources",
       "Azurehome": "diagrams.azure.general.Azurehome",
       "Developertools": "diagrams.azure.general.Developertools",
       "Helpsupport": "diagrams.azure.general.Helpsupport",
       "Information": "diagrams.azure.general.Information",
       "Managementgroups": "diagrams.azure.general.Managementgroups",
       "Marketplace": "diagrams.azure.general.Marketplace",
       "Quickstartcenter": "diagrams.azure.general.Quickstartcenter",
       "Recent": "diagrams.azure.general.Recent",
       "Reservations": "diagrams.azure.general.Reservations",
       "Resource": "diagrams.azure.general.Resource",
       "Resourcegroups": "diagrams.azure.general.Resourcegroups",
       "Servicehealth": "diagrams.azure.general.Servicehealth",
       "Shareddashboard": "diagrams.azure.general.Shareddashboard",
       "Subscriptions": "diagrams.azure.general.Subscriptions",
       "Support": "diagrams.azure.general.Support",
       "Supportrequests": "diagrams.azure.general.Supportrequests",
       "Tag": "diagrams.azure.general.Tag",
       "Tags": "diagrams.azure.general.Tags",
       "Templates": "diagrams.azure.general.Templates",
       "Twousericon": "diagrams.azure.general.Twousericon",
       "Userhealthicon": "diagrams.azure.general.Userhealthicon",
       "Usericon": "diagrams.azure.general.Usericon",
       "Userprivacy": "diagrams.azure.general.Userprivacy",
       "Userresource": "diagrams.azure.general.Userresource",
       "Whatsnew": "diagrams.azure.general.Whatsnew"
   },
   "Identity": {
       "AccessReview": "diagrams.azure.identity.AccessReview",
       "ActiveDirectoryConnectHealth": "diagrams.azure.identity.ActiveDirectoryConnectHealth",
       "ActiveDirectory": "diagrams.azure.identity.ActiveDirectory",
       "ADB2C": "diagrams.azure.identity.ADB2C",
       "ADDomainServices": "diagrams.azure.identity.ADDomainServices",
       "ADIdentityProtection": "diagrams.azure.identity.ADIdentityProtection",
       "ADPrivilegedIdentityManagement": "diagrams.azure.identity.ADPrivilegedIdentityManagement",
       "AppRegistrations": "diagrams.azure.identity.AppRegistrations",
       "ConditionalAccess": "diagrams.azure.identity.ConditionalAccess",
       "EnterpriseApplications": "diagrams.azure.identity.EnterpriseApplications",
       "Groups": "diagrams.azure.identity.Groups",
       "IdentityGovernance": "diagrams.azure.identity.IdentityGovernance",
       "InformationProtection": "diagrams.azure.identity.InformationProtection",
       "ManagedIdentities": "diagrams.azure.identity.ManagedIdentities",
       "Users": "diagrams.azure.identity.Users"
   },
   "Integration": {
       "APIForFhir": "diagrams.azure.integration.APIForFhir",
       "APIManagement": "diagrams.azure.integration.APIManagement",
       "AppConfiguration": "diagrams.azure.integration.AppConfiguration",
       "DataCatalog": "diagrams.azure.integration.DataCatalog",
       "EventGridDomains": "diagrams.azure.integration.EventGridDomains",
       "EventGridSubscriptions": "diagrams.azure.integration.EventGridSubscriptions",
       "EventGridTopics": "diagrams.azure.integration.EventGridTopics",
       "IntegrationAccounts": "diagrams.azure.integration.IntegrationAccounts",
       "IntegrationServiceEnvironments": "diagrams.azure.integration.IntegrationServiceEnvironments",
       "LogicAppsCustomConnector": "diagrams.azure.integration.LogicAppsCustomConnector",
       "LogicApps": "diagrams.azure.integration.LogicApps",
       "PartnerTopic": "diagrams.azure.integration.PartnerTopic",
       "SendgridAccounts": "diagrams.azure.integration.SendgridAccounts",
       "ServiceBusRelays": "diagrams.azure.integration.ServiceBusRelays",
       "ServiceBus": "diagrams.azure.integration.ServiceBus",
       "SoftwareAsAService": "diagrams.azure.integration.SoftwareAsAService",
       "StorsimpleDeviceManagers": "diagrams.azure.integration.StorsimpleDeviceManagers",
       "SystemTopic": "diagrams.azure.integration.SystemTopic"
   },
   "IoT": {
       "DeviceProvisioningServices": "diagrams.azure.iot.DeviceProvisioningServices",
       "DigitalTwins": "diagrams.azure.iot.DigitalTwins",
       "IotCentralApplications": "diagrams.azure.iot.IotCentralApplications",
       "IotHubSecurity": "diagrams.azure.iot.IotHubSecurity",
       "IotHub": "diagrams.azure.iot.IotHub",
       "Maps": "diagrams.azure.iot.Maps",
       "Sphere": "diagrams.azure.iot.Sphere",
       "TimeSeriesInsightsEnvironments": "diagrams.azure.iot.TimeSeriesInsightsEnvironments",
       "TimeSeriesInsightsEventsSources": "diagrams.azure.iot.TimeSeriesInsightsEventsSources",
       "Windows10IotCoreServices": "diagrams.azure.iot.Windows10IotCoreServices"
   },
   "Migration": {
       "DataBoxEdge": "diagrams.azure.migration.DataBoxEdge",
       "DataBox": "diagrams.azure.migration.DataBox",
       "DatabaseMigrationServices": "diagrams.azure.migration.DatabaseMigrationServices",
       "MigrationProjects": "diagrams.azure.migration.MigrationProjects",
       "RecoveryServicesVaults": "diagrams.azure.migration.RecoveryServicesVaults"
   },
   "ML": {
       "BatchAI": "diagrams.azure.ml.BatchAI",
       "BotServices": "diagrams.azure.ml.BotServices",
       "CognitiveServices": "diagrams.azure.ml.CognitiveServices",
       "GenomicsAccounts": "diagrams.azure.ml.GenomicsAccounts",
       "MachineLearningServiceWorkspaces": "diagrams.azure.ml.MachineLearningServiceWorkspaces",
       "MachineLearningStudioWebServicePlans": "diagrams.azure.ml.MachineLearningStudioWebServicePlans",
       "MachineLearningStudioWebServices": "diagrams.azure.ml.MachineLearningStudioWebServices",
       "MachineLearningStudioWorkspaces": "diagrams.azure.ml.MachineLearningStudioWorkspaces"
   },
   "Mobile": {
       "AppServiceMobile": "diagrams.azure.mobile.AppServiceMobile",
       "MobileEngagement": "diagrams.azure.mobile.MobileEngagement",
       "NotificationHubs": "diagrams.azure.mobile.NotificationHubs"
   },
   "Network": {
       "ApplicationGateway": "diagrams.azure.network.ApplicationGateway",
       "ApplicationSecurityGroups": "diagrams.azure.network.ApplicationSecurityGroups",
       "CDNProfiles": "diagrams.azure.network.CDNProfiles",
       "Connections": "diagrams.azure.network.Connections",
       "DDOSProtectionPlans": "diagrams.azure.network.DDOSProtectionPlans",
       "DNSPrivateZones": "diagrams.azure.network.DNSPrivateZones",
       "DNSZones": "diagrams.azure.network.DNSZones",
       "ExpressrouteCircuits": "diagrams.azure.network.ExpressrouteCircuits",
       "Firewall": "diagrams.azure.network.Firewall",
       "FrontDoors": "diagrams.azure.network.FrontDoors",
       "LoadBalancers": "diagrams.azure.network.LoadBalancers",
       "LocalNetworkGateways": "diagrams.azure.network.LocalNetworkGateways",
       "NetworkInterfaces": "diagrams.azure.network.NetworkInterfaces",
       "NetworkSecurityGroupsClassic": "diagrams.azure.network.NetworkSecurityGroupsClassic",
       "NetworkWatcher": "diagrams.azure.network.NetworkWatcher",
       "OnPremisesDataGateways": "diagrams.azure.network.OnPremisesDataGateways",
       "PublicIpAddresses": "diagrams.azure.network.PublicIpAddresses",
       "ReservedIpAddressesClassic": "diagrams.azure.network.ReservedIpAddressesClassic",
       "RouteFilters": "diagrams.azure.network.RouteFilters",
       "RouteTables": "diagrams.azure.network.RouteTables",
       "ServiceEndpointPolicies": "diagrams.azure.network.ServiceEndpointPolicies",
       "Subnets": "diagrams.azure.network.Subnets",
       "TrafficManagerProfiles": "diagrams.azure.network.TrafficManagerProfiles",
       "VirtualNetworkClassic": "diagrams.azure.network.VirtualNetworkClassic",
       "VirtualNetworkGateways": "diagrams.azure.network.VirtualNetworkGateways",
       "VirtualNetworks": "diagrams.azure.network.VirtualNetworks",
       "VirtualWans": "diagrams.azure.network.VirtualWans"
   },
   "Security": {
       "ApplicationSecurityGroups": "diagrams.azure.security.ApplicationSecurityGroups",
       "ConditionalAccess": "diagrams.azure.security.ConditionalAccess",
       "Defender": "diagrams.azure.security.Defender",
       "ExtendedSecurityUpdates": "diagrams.azure.security.ExtendedSecurityUpdates",
       "KeyVaults": "diagrams.azure.security.KeyVaults",
       "SecurityCenter": "diagrams.azure.security.SecurityCenter",
       "Sentinel": "diagrams.azure.security.Sentinel"
   },
   "Storage": {
       "ArchiveStorage": "diagrams.azure.storage.ArchiveStorage",
       "Azurefxtedgefiler": "diagrams.azure.storage.Azurefxtedgefiler",
       "BlobStorage": "diagrams.azure.storage.BlobStorage",
       "DataBoxEdgeDataBoxGateway": "diagrams.azure.storage.DataBoxEdgeDataBoxGateway",
       "DataBox": "diagrams.azure.storage.DataBox",
       "DataLakeStorage": "diagrams.azure.storage.DataLakeStorage",
       "GeneralStorage": "diagrams.azure.storage.GeneralStorage",
       "NetappFiles": "diagrams.azure.storage.NetappFiles",
       "QueuesStorage": "diagrams.azure.storage.QueuesStorage",
       "StorageAccountsClassic": "diagrams.azure.storage.StorageAccountsClassic",
       "StorageAccounts": "diagrams.azure.storage.StorageAccounts",
       "StorageExplorer": "diagrams.azure.storage.StorageExplorer",
       "StorageSyncServices": "diagrams.azure.storage.StorageSyncServices",
       "StorsimpleDataManagers": "diagrams.azure.storage.StorsimpleDataManagers",
       "StorsimpleDeviceManagers": "diagrams.azure.storage.StorsimpleDeviceManagers",
       "TableStorage": "diagrams.azure.storage.TableStorage"
   },
   "Web": {
       "APIConnections": "diagrams.azure.web.APIConnections",
       "AppServiceCertificates": "diagrams.azure.web.AppServiceCertificates",
       "AppServiceDomains": "diagrams.azure.web.AppServiceDomains",
       "AppServiceEnvironments": "diagrams.azure.web.AppServiceEnvironments",
       "AppServicePlans": "diagrams.azure.web.AppServicePlans",
       "AppServices": "diagrams.azure.web.AppServices",
       "MediaServices": "diagrams.azure.web.MediaServices",
       "NotificationHubNamespaces": "diagrams.azure.web.NotificationHubNamespaces",
       "Search": "diagrams.azure.web.Search",
       "Signalr": "diagrams.azure.web.Signalr"
   }
}

# Comprehensive Alibaba Cloud components dictionary
ALIBABACLOUD_COMPONENTS = {
    "Analytics": {
        "AnalyticDb": "diagrams.alibabacloud.analytics.AnalyticDb",
        "ClickHouse": "diagrams.alibabacloud.analytics.ClickHouse",
        "DataLakeAnalytics": "diagrams.alibabacloud.analytics.DataLakeAnalytics",
        "ElaticMapReduce": "diagrams.alibabacloud.analytics.ElaticMapReduce",
        "OpenSearch": "diagrams.alibabacloud.analytics.OpenSearch"
    },
    "Application": {
        "ApiGateway": "diagrams.alibabacloud.application.ApiGateway",
        "BeeBot": "diagrams.alibabacloud.application.BeeBot",
        "BlockchainAsAService": "diagrams.alibabacloud.application.BlockchainAsAService",
        "CloudCallCenter": "diagrams.alibabacloud.application.CloudCallCenter",
        "CodePipeline": "diagrams.alibabacloud.application.CodePipeline",
        "DirectMail": "diagrams.alibabacloud.application.DirectMail",
        "LogService": "diagrams.alibabacloud.application.LogService",  # SLS (alias)
        "MessageNotificationService": "diagrams.alibabacloud.application.MessageNotificationService",  # MNS (alias)
        "NodeJsPerformancePlatform": "diagrams.alibabacloud.application.NodeJsPerformancePlatform",
        "OpenSearch": "diagrams.alibabacloud.application.OpenSearch",
        "PerformanceTestingService": "diagrams.alibabacloud.application.PerformanceTestingService",  # PTS (alias)
        "RdCloud": "diagrams.alibabacloud.application.RdCloud",
        "SmartConversationAnalysis": "diagrams.alibabacloud.application.SmartConversationAnalysis",  # SCA (alias)
        "Yida": "diagrams.alibabacloud.application.Yida"
    },
    "Communication": {
        "DirectMail": "diagrams.alibabacloud.communication.DirectMail",
        "MobilePush": "diagrams.alibabacloud.communication.MobilePush"
    },
    "Compute": {
        "AutoScaling": "diagrams.alibabacloud.compute.AutoScaling",  # ESS (alias)
        "BatchCompute": "diagrams.alibabacloud.compute.BatchCompute",
        "ContainerRegistry": "diagrams.alibabacloud.compute.ContainerRegistry",
        "ContainerService": "diagrams.alibabacloud.compute.ContainerService",
        "ElasticComputeService": "diagrams.alibabacloud.compute.ElasticComputeService",  # ECS (alias)
        "ElasticContainerInstance": "diagrams.alibabacloud.compute.ElasticContainerInstance",  # ECI (alias)
        "ElasticHighPerformanceComputing": "diagrams.alibabacloud.compute.ElasticHighPerformanceComputing",  # EHPC (alias)
        "ElasticSearch": "diagrams.alibabacloud.compute.ElasticSearch",
        "FunctionCompute": "diagrams.alibabacloud.compute.FunctionCompute",  # FC (alias)
        "OperationOrchestrationService": "diagrams.alibabacloud.compute.OperationOrchestrationService",  # OOS (alias)
        "ResourceOrchestrationService": "diagrams.alibabacloud.compute.ResourceOrchestrationService",  # ROS (alias)
        "ServerLoadBalancer": "diagrams.alibabacloud.compute.ServerLoadBalancer",  # SLB (alias)
        "ServerlessAppEngine": "diagrams.alibabacloud.compute.ServerlessAppEngine",  # SAE (alias)
        "SimpleApplicationServer": "diagrams.alibabacloud.compute.SimpleApplicationServer",  # SAS (alias)
        "WebAppService": "diagrams.alibabacloud.compute.WebAppService",  # WAS (alias)
    },
    "Database": {
        "ApsaradbCassandra": "diagrams.alibabacloud.database.ApsaradbCassandra",
        "ApsaradbHbase": "diagrams.alibabacloud.database.ApsaradbHbase",
        "ApsaradbMemcache": "diagrams.alibabacloud.database.ApsaradbMemcache",
        "ApsaradbMongodb": "diagrams.alibabacloud.database.ApsaradbMongodb",
        "ApsaradbOceanbase": "diagrams.alibabacloud.database.ApsaradbOceanbase",
        "ApsaradbPolardb": "diagrams.alibabacloud.database.ApsaradbPolardb",
        "ApsaradbPostgresql": "diagrams.alibabacloud.database.ApsaradbPostgresql",
        "ApsaradbPpas": "diagrams.alibabacloud.database.ApsaradbPpas",
        "ApsaradbRedis": "diagrams.alibabacloud.database.ApsaradbRedis",
        "ApsaradbSqlserver": "diagrams.alibabacloud.database.ApsaradbSqlserver",
        "DataManagementService": "diagrams.alibabacloud.database.DataManagementService",  # DMS (alias)
        "DataTransmissionService": "diagrams.alibabacloud.database.DataTransmissionService",  # DTS (alias)
        "DatabaseBackupService": "diagrams.alibabacloud.database.DatabaseBackupService",  # DBS (alias)
        "DisributeRelationalDatabaseService": "diagrams.alibabacloud.database.DisributeRelationalDatabaseService",  # DRDS (alias)
        "GraphDatabaseService": "diagrams.alibabacloud.database.GraphDatabaseService",  # GDS (alias)
        "HybriddbForMysql": "diagrams.alibabacloud.database.HybriddbForMysql",
        "RelationalDatabaseService": "diagrams.alibabacloud.database.RelationalDatabaseService"  # RDS (alias)
    },
    "IoT": {
        "IotInternetDeviceId": "diagrams.alibabacloud.iot.IotInternetDeviceId",
        "IotLinkWan": "diagrams.alibabacloud.iot.IotLinkWan",
        "IotMobileConnectionPackage": "diagrams.alibabacloud.iot.IotMobileConnectionPackage",
        "IotPlatform": "diagrams.alibabacloud.iot.IotPlatform"
    },
    "Network": {
        "Cdn": "diagrams.alibabacloud.network.Cdn",
        "CloudEnterpriseNetwork": "diagrams.alibabacloud.network.CloudEnterpriseNetwork",  # CEN (alias)
        "ElasticIpAddress": "diagrams.alibabacloud.network.ElasticIpAddress",  # EIP (alias)
        "ExpressConnect": "diagrams.alibabacloud.network.ExpressConnect",
        "NatGateway": "diagrams.alibabacloud.network.NatGateway",
        "ServerLoadBalancer": "diagrams.alibabacloud.network.ServerLoadBalancer",  # SLB (alias)
        "SmartAccessGateway": "diagrams.alibabacloud.network.SmartAccessGateway",
        "VirtualPrivateCloud": "diagrams.alibabacloud.network.VirtualPrivateCloud",  # VPC (alias)
        "VpnGateway": "diagrams.alibabacloud.network.VpnGateway"
    },
    "Security": {
        "AntiBotService": "diagrams.alibabacloud.security.AntiBotService",  # ABS (alias)
        "AntiDdosBasic": "diagrams.alibabacloud.security.AntiDdosBasic",
        "AntiDdosPro": "diagrams.alibabacloud.security.AntiDdosPro",
        "AntifraudService": "diagrams.alibabacloud.security.AntifraudService",  # AS (alias)
        "BastionHost": "diagrams.alibabacloud.security.BastionHost",
        "CloudFirewall": "diagrams.alibabacloud.security.CloudFirewall",  # CFW (alias)
        "CloudSecurityScanner": "diagrams.alibabacloud.security.CloudSecurityScanner",
        "ContentModeration": "diagrams.alibabacloud.security.ContentModeration",  # CM (alias)
        "CrowdsourcedSecurityTesting": "diagrams.alibabacloud.security.CrowdsourcedSecurityTesting",
        "DataEncryptionService": "diagrams.alibabacloud.security.DataEncryptionService",  # DES (alias)
        "DbAudit": "diagrams.alibabacloud.security.DbAudit",
        "GameShield": "diagrams.alibabacloud.security.GameShield",
        "IdVerification": "diagrams.alibabacloud.security.IdVerification",
        "ManagedSecurityService": "diagrams.alibabacloud.security.ManagedSecurityService",
        "SecurityCenter": "diagrams.alibabacloud.security.SecurityCenter",
        "ServerGuard": "diagrams.alibabacloud.security.ServerGuard",
        "SslCertificates": "diagrams.alibabacloud.security.SslCertificates",
        "WebApplicationFirewall": "diagrams.alibabacloud.security.WebApplicationFirewall"  # WAF (alias)
    },
    "Storage": {
        "CloudStorageGateway": "diagrams.alibabacloud.storage.CloudStorageGateway",
        "FileStorageHdfs": "diagrams.alibabacloud.storage.FileStorageHdfs",  # HDFS (alias)
        "FileStorageNas": "diagrams.alibabacloud.storage.FileStorageNas",  # NAS (alias)
        "HybridBackupRecovery": "diagrams.alibabacloud.storage.HybridBackupRecovery",  # HBR (alias)
        "HybridCloudDisasterRecovery": "diagrams.alibabacloud.storage.HybridCloudDisasterRecovery",  # HDR (alias)
        "Imm": "diagrams.alibabacloud.storage.Imm",
        "ObjectStorageService": "diagrams.alibabacloud.storage.ObjectStorageService",  # OSS (alias)
        "ObjectTableStore": "diagrams.alibabacloud.storage.ObjectTableStore",  # OTS (alias)
    },
    "Web": {
        "Dns": "diagrams.alibabacloud.web.Dns",
        "Domain": "diagrams.alibabacloud.web.Domain"
    }
}

# Comprehensive GCP components dictionary
GCP_COMPONENTS = {
   "Analytics": {
       "Bigquery": "diagrams.gcp.analytics.Bigquery",
       "Composer": "diagrams.gcp.analytics.Composer",
       "DataCatalog": "diagrams.gcp.analytics.DataCatalog",
       "DataFusion": "diagrams.gcp.analytics.DataFusion",
       "Dataflow": "diagrams.gcp.analytics.Dataflow",
       "Datalab": "diagrams.gcp.analytics.Datalab",
       "Dataprep": "diagrams.gcp.analytics.Dataprep",
       "Dataproc": "diagrams.gcp.analytics.Dataproc",
       "Genomics": "diagrams.gcp.analytics.Genomics",
       "Pubsub": "diagrams.gcp.analytics.Pubsub"
   },
   "API": {
       "APIGateway": "diagrams.gcp.api.APIGateway",
       "Endpoints": "diagrams.gcp.api.Endpoints"
   },
   "Compute": {
       "AppEngine": "diagrams.gcp.compute.AppEngine",
       "ComputeEngine": "diagrams.gcp.compute.ComputeEngine",
       "ContainerOptimizedOS": "diagrams.gcp.compute.ContainerOptimizedOS",
       "Functions": "diagrams.gcp.compute.Functions",
       "GKEOnPrem": "diagrams.gcp.compute.GKEOnPrem",
       "GPU": "diagrams.gcp.compute.GPU",
       "KubernetesEngine": "diagrams.gcp.compute.KubernetesEngine",
       "Run": "diagrams.gcp.compute.Run"
   },
   "Database": {
       "Bigtable": "diagrams.gcp.database.Bigtable",
       "Datastore": "diagrams.gcp.database.Datastore",
       "Firestore": "diagrams.gcp.database.Firestore",
       "Memorystore": "diagrams.gcp.database.Memorystore",
       "Spanner": "diagrams.gcp.database.Spanner",
       "SQL": "diagrams.gcp.database.SQL"
   },
   "DevTools": {
       "Build": "diagrams.gcp.devtools.Build",
       "CodeForIntellij": "diagrams.gcp.devtools.CodeForIntellij",
       "Code": "diagrams.gcp.devtools.Code",
       "ContainerRegistry": "diagrams.gcp.devtools.ContainerRegistry",
       "GradleAppEnginePlugin": "diagrams.gcp.devtools.GradleAppEnginePlugin",
       "IdePlugins": "diagrams.gcp.devtools.IdePlugins",
       "MavenAppEnginePlugin": "diagrams.gcp.devtools.MavenAppEnginePlugin",
       "Scheduler": "diagrams.gcp.devtools.Scheduler",
       "SDK": "diagrams.gcp.devtools.SDK",
       "SourceRepositories": "diagrams.gcp.devtools.SourceRepositories",
       "Tasks": "diagrams.gcp.devtools.Tasks",
       "TestLab": "diagrams.gcp.devtools.TestLab",
       "ToolsForEclipse": "diagrams.gcp.devtools.ToolsForEclipse",
       "ToolsForPowershell": "diagrams.gcp.devtools.ToolsForPowershell",
       "ToolsForVisualStudio": "diagrams.gcp.devtools.ToolsForVisualStudio"
   },
   "IoT": {
       "IotCore": "diagrams.gcp.iot.IotCore"
   },
   "Migration": {
       "TransferAppliance": "diagrams.gcp.migration.TransferAppliance"
   },
   "ML": {
       "AdvancedSolutionsLab": "diagrams.gcp.ml.AdvancedSolutionsLab",
       "AIHub": "diagrams.gcp.ml.AIHub",
       "AIPlatformDataLabelingService": "diagrams.gcp.ml.AIPlatformDataLabelingService",
       "AIPlatform": "diagrams.gcp.ml.AIPlatform",
       "AutomlNaturalLanguage": "diagrams.gcp.ml.AutomlNaturalLanguage",
       "AutomlTables": "diagrams.gcp.ml.AutomlTables",
       "AutomlTranslation": "diagrams.gcp.ml.AutomlTranslation",
       "AutomlVideoIntelligence": "diagrams.gcp.ml.AutomlVideoIntelligence",
       "AutomlVision": "diagrams.gcp.ml.AutomlVision",
       "Automl": "diagrams.gcp.ml.Automl",
       "DialogFlowEnterpriseEdition": "diagrams.gcp.ml.DialogFlowEnterpriseEdition",
       "InferenceAPI": "diagrams.gcp.ml.InferenceAPI",
       "JobsAPI": "diagrams.gcp.ml.JobsAPI",
       "NaturalLanguageAPI": "diagrams.gcp.ml.NaturalLanguageAPI",
       "RecommendationsAI": "diagrams.gcp.ml.RecommendationsAI",
       "SpeechToText": "diagrams.gcp.ml.SpeechToText",
       "TextToSpeech": "diagrams.gcp.ml.TextToSpeech",
       "TPU": "diagrams.gcp.ml.TPU",
       "TranslationAPI": "diagrams.gcp.ml.TranslationAPI",
       "VideoIntelligenceAPI": "diagrams.gcp.ml.VideoIntelligenceAPI",
       "VisionAPI": "diagrams.gcp.ml.VisionAPI"
   },
   "Network": {
       "Armor": "diagrams.gcp.network.Armor",
       "CDN": "diagrams.gcp.network.CDN",
       "DedicatedInterconnect": "diagrams.gcp.network.DedicatedInterconnect",
       "DNS": "diagrams.gcp.network.DNS",
       "ExternalIpAddresses": "diagrams.gcp.network.ExternalIpAddresses",
       "FirewallRules": "diagrams.gcp.network.FirewallRules",
       "LoadBalancing": "diagrams.gcp.network.LoadBalancing",
       "NAT": "diagrams.gcp.network.NAT",
       "Network": "diagrams.gcp.network.Network",
       "PartnerInterconnect": "diagrams.gcp.network.PartnerInterconnect",
       "PremiumNetworkTier": "diagrams.gcp.network.PremiumNetworkTier",
       "Router": "diagrams.gcp.network.Router",
       "Routes": "diagrams.gcp.network.Routes",
       "StandardNetworkTier": "diagrams.gcp.network.StandardNetworkTier",
       "TrafficDirector": "diagrams.gcp.network.TrafficDirector",
       "VirtualPrivateCloud": "diagrams.gcp.network.VirtualPrivateCloud",
       "VPN": "diagrams.gcp.network.VPN"
   },
   "Operations": {
       "Monitoring": "diagrams.gcp.operations.Monitoring"
   },
   "Security": {
       "Iam": "diagrams.gcp.security.Iam",
       "IAP": "diagrams.gcp.security.IAP",
       "KeyManagementService": "diagrams.gcp.security.KeyManagementService",
       "ResourceManager": "diagrams.gcp.security.ResourceManager",
       "SecurityCommandCenter": "diagrams.gcp.security.SecurityCommandCenter",
       "SecurityScanner": "diagrams.gcp.security.SecurityScanner"
   },
   "Storage": {
       "Filestore": "diagrams.gcp.storage.Filestore",
       "PersistentDisk": "diagrams.gcp.storage.PersistentDisk",
       "Storage": "diagrams.gcp.storage.Storage"
   }
}

# Comprehensive Generic components dictionary
GENERIC_COMPONENTS = {
    "Blank": {
        "Blank": "diagrams.generic.blank.Blank"
    },
    "Compute": {
        "Rack": "diagrams.generic.compute.Rack"
    },
    "Database": {
        "SQL": "diagrams.generic.database.SQL"
    },
    "Device": {
        "Mobile": "diagrams.generic.device.Mobile",
        "Tablet": "diagrams.generic.device.Tablet"
    },
    "Network": {
        "Firewall": "diagrams.generic.network.Firewall",
        "Router": "diagrams.generic.network.Router",
        "Subnet": "diagrams.generic.network.Subnet",
        "Switch": "diagrams.generic.network.Switch",
        "VPN": "diagrams.generic.network.VPN"
    },
    "OS": {
        "Android": "diagrams.generic.os.Android",
        "Centos": "diagrams.generic.os.Centos",
        "Debian": "diagrams.generic.os.Debian",
        "IOS": "diagrams.generic.os.IOS",
        "LinuxGeneral": "diagrams.generic.os.LinuxGeneral",
        "Raspbian": "diagrams.generic.os.Raspbian",
        "RedHat": "diagrams.generic.os.RedHat",
        "Suse": "diagrams.generic.os.Suse",
        "Ubuntu": "diagrams.generic.os.Ubuntu",
        "Windows": "diagrams.generic.os.Windows"
    },
    "Place": {
        "Datacenter": "diagrams.generic.place.Datacenter"
    },
    "Storage": {
        "Storage": "diagrams.generic.storage.Storage"
    },
    "Virtualization": {
        "Virtualbox": "diagrams.generic.virtualization.Virtualbox",
        "Vmware": "diagrams.generic.virtualization.Vmware",
        "XEN": "diagrams.generic.virtualization.XEN"
    }
}



# Comprehensive DigitalOcean components dictionary
DIGITALOCEAN_COMPONENTS = {
    "Compute": {
        "Containers": "diagrams.digitalocean.compute.Containers",
        "Docker": "diagrams.digitalocean.compute.Docker",
        "DropletConnect": "diagrams.digitalocean.compute.DropletConnect",
        "DropletSnapshot": "diagrams.digitalocean.compute.DropletSnapshot",
        "Droplet": "diagrams.digitalocean.compute.Droplet",
        "K8SCluster": "diagrams.digitalocean.compute.K8SCluster",
        "K8SNodePool": "diagrams.digitalocean.compute.K8SNodePool",
        "K8SNode": "diagrams.digitalocean.compute.K8SNode"
    },
    "Database": {
        "DbaasPrimaryStandbyMore": "diagrams.digitalocean.database.DbaasPrimaryStandbyMore",
        "DbaasPrimary": "diagrams.digitalocean.database.DbaasPrimary",
        "DbaasReadOnly": "diagrams.digitalocean.database.DbaasReadOnly",
        "DbaasStandby": "diagrams.digitalocean.database.DbaasStandby"
    },
    "Network": {
        "Certificate": "diagrams.digitalocean.network.Certificate",
        "DomainRegistration": "diagrams.digitalocean.network.DomainRegistration",
        "Domain": "diagrams.digitalocean.network.Domain",
        "Firewall": "diagrams.digitalocean.network.Firewall",
        "FloatingIp": "diagrams.digitalocean.network.FloatingIp",
        "InternetGateway": "diagrams.digitalocean.network.InternetGateway",
        "LoadBalancer": "diagrams.digitalocean.network.LoadBalancer",
        "ManagedVpn": "diagrams.digitalocean.network.ManagedVpn",
        "Vpc": "diagrams.digitalocean.network.Vpc"
    },
    "Storage": {
        "Folder": "diagrams.digitalocean.storage.Folder",
        "Space": "diagrams.digitalocean.storage.Space",
        "VolumeSnapshot": "diagrams.digitalocean.storage.VolumeSnapshot",
        "Volume": "diagrams.digitalocean.storage.Volume"
    }
}

# Comprehensive Elastic components dictionary
ELASTIC_COMPONENTS = {
    "Agent": {
        "Agent": "diagrams.elastic.agent.Agent",
        "Endpoint": "diagrams.elastic.agent.Endpoint",
        "Fleet": "diagrams.elastic.agent.Fleet",
        "Integrations": "diagrams.elastic.agent.Integrations"
    },
    "Beats": {
        "APM": "diagrams.elastic.beats.APM",
        "Auditbeat": "diagrams.elastic.beats.Auditbeat",
        "Filebeat": "diagrams.elastic.beats.Filebeat",
        "Functionbeat": "diagrams.elastic.beats.Functionbeat",
        "Heartbeat": "diagrams.elastic.beats.Heartbeat",
        "Metricbeat": "diagrams.elastic.beats.Metricbeat",
        "Packetbeat": "diagrams.elastic.beats.Packetbeat",
        "Winlogbeat": "diagrams.elastic.beats.Winlogbeat"
    },
    "Elasticsearch": {
        "Alerting": "diagrams.elastic.elasticsearch.Alerting",
        "Beats": "diagrams.elastic.elasticsearch.Beats",
        "Elasticsearch": "diagrams.elastic.elasticsearch.Elasticsearch",  # ElasticSearch (alias)
        "Kibana": "diagrams.elastic.elasticsearch.Kibana",
        "LogstashPipeline": "diagrams.elastic.elasticsearch.LogstashPipeline",
        "Logstash": "diagrams.elastic.elasticsearch.Logstash",  # LogStash (alias)
        "MachineLearning": "diagrams.elastic.elasticsearch.MachineLearning",  # ML (alias)
        "MapServices": "diagrams.elastic.elasticsearch.MapServices",
        "Maps": "diagrams.elastic.elasticsearch.Maps",
        "Monitoring": "diagrams.elastic.elasticsearch.Monitoring",
        "SearchableSnapshots": "diagrams.elastic.elasticsearch.SearchableSnapshots",
        "SecuritySettings": "diagrams.elastic.elasticsearch.SecuritySettings",
        "SQL": "diagrams.elastic.elasticsearch.SQL",
        "Stack": "diagrams.elastic.elasticsearch.Stack"
    },
    "EnterpriseSearch": {
        "AppSearch": "diagrams.elastic.enterprisesearch.AppSearch",
        "Crawler": "diagrams.elastic.enterprisesearch.Crawler",
        "EnterpriseSearch": "diagrams.elastic.enterprisesearch.EnterpriseSearch",
        "SiteSearch": "diagrams.elastic.enterprisesearch.SiteSearch",
        "WorkplaceSearch": "diagrams.elastic.enterprisesearch.WorkplaceSearch"
    },
    "Observability": {
        "APM": "diagrams.elastic.observability.APM",
        "Logs": "diagrams.elastic.observability.Logs",
        "Metrics": "diagrams.elastic.observability.Metrics",
        "Observability": "diagrams.elastic.observability.Observability",
        "Uptime": "diagrams.elastic.observability.Uptime"
    },
    "Orchestration": {
        "ECE": "diagrams.elastic.orchestration.ECE",
        "ECK": "diagrams.elastic.orchestration.ECK"
    },
    "SaaS": {
        "Cloud": "diagrams.elastic.saas.Cloud",
        "Elastic": "diagrams.elastic.saas.Elastic"
    },
    "Security": {
        "Endpoint": "diagrams.elastic.security.Endpoint",
        "Security": "diagrams.elastic.security.Security",
        "SIEM": "diagrams.elastic.security.SIEM",
        "Xdr": "diagrams.elastic.security.Xdr"
    }
}

# Comprehensive Firebase components dictionary
FIREBASE_COMPONENTS = {
    "Base": {
        "Firebase": "diagrams.firebase.base.Firebase"
    },
    "Develop": {
        "Authentication": "diagrams.firebase.develop.Authentication",
        "Firestore": "diagrams.firebase.develop.Firestore",
        "Functions": "diagrams.firebase.develop.Functions",
        "Hosting": "diagrams.firebase.develop.Hosting",
        "MLKit": "diagrams.firebase.develop.MLKit",
        "RealtimeDatabase": "diagrams.firebase.develop.RealtimeDatabase",
        "Storage": "diagrams.firebase.develop.Storage"
    },
    "Extensions": {
        "Extensions": "diagrams.firebase.extentions.Extensions"
    },
    "Grow": {
        "ABTesting": "diagrams.firebase.grow.ABTesting",
        "AppIndexing": "diagrams.firebase.grow.AppIndexing",
        "DynamicLinks": "diagrams.firebase.grow.DynamicLinks",
        "InAppMessaging": "diagrams.firebase.grow.InAppMessaging",
        "Invites": "diagrams.firebase.grow.Invites",
        "Messaging": "diagrams.firebase.grow.Messaging",  # FCM (alias)
        "Predictions": "diagrams.firebase.grow.Predictions",
        "RemoteConfig": "diagrams.firebase.grow.RemoteConfig"
    },
    "Quality": {
        "AppDistribution": "diagrams.firebase.quality.AppDistribution",
        "CrashReporting": "diagrams.firebase.quality.CrashReporting",
        "Crashlytics": "diagrams.firebase.quality.Crashlytics",
        "PerformanceMonitoring": "diagrams.firebase.quality.PerformanceMonitoring",
        "TestLab": "diagrams.firebase.quality.TestLab"
    }
}

# Comprehensive IBM components dictionary
IBM_COMPONENTS = {
    "Analytics": {
        "Analytics": "diagrams.ibm.analytics.Analytics",
        "DataIntegration": "diagrams.ibm.analytics.DataIntegration",
        "DataRepositories": "diagrams.ibm.analytics.DataRepositories",
        "DeviceAnalytics": "diagrams.ibm.analytics.DeviceAnalytics",
        "StreamingComputing": "diagrams.ibm.analytics.StreamingComputing"
    },
    "Applications": {
        "ActionableInsight": "diagrams.ibm.applications.ActionableInsight",
        "Annotate": "diagrams.ibm.applications.Annotate",
        "ApiDeveloperPortal": "diagrams.ibm.applications.ApiDeveloperPortal",
        "ApiPolyglotRuntimes": "diagrams.ibm.applications.ApiPolyglotRuntimes",
        "AppServer": "diagrams.ibm.applications.AppServer",
        "ApplicationLogic": "diagrams.ibm.applications.ApplicationLogic",
        "EnterpriseApplications": "diagrams.ibm.applications.EnterpriseApplications",
        "Index": "diagrams.ibm.applications.Index",
        "IotApplication": "diagrams.ibm.applications.IotApplication",
        "Microservice": "diagrams.ibm.applications.Microservice",
        "MobileApp": "diagrams.ibm.applications.MobileApp",
        "Ontology": "diagrams.ibm.applications.Ontology",
        "OpenSourceTools": "diagrams.ibm.applications.OpenSourceTools",
        "RuntimeServices": "diagrams.ibm.applications.RuntimeServices",
        "SaasApplications": "diagrams.ibm.applications.SaasApplications",
        "ServiceBroker": "diagrams.ibm.applications.ServiceBroker",
        "SpeechToText": "diagrams.ibm.applications.SpeechToText",
        "VisualRecognition": "diagrams.ibm.applications.VisualRecognition",
        "Visualization": "diagrams.ibm.applications.Visualization"
    },
    "Blockchain": {
        "BlockchainDeveloper": "diagrams.ibm.blockchain.BlockchainDeveloper",
        "Blockchain": "diagrams.ibm.blockchain.Blockchain",
        "CertificateAuthority": "diagrams.ibm.blockchain.CertificateAuthority",
        "ClientApplication": "diagrams.ibm.blockchain.ClientApplication",
        "Communication": "diagrams.ibm.blockchain.Communication",
        "Consensus": "diagrams.ibm.blockchain.Consensus",
        "EventListener": "diagrams.ibm.blockchain.EventListener",
        "Event": "diagrams.ibm.blockchain.Event",
        "ExistingEnterpriseSystems": "diagrams.ibm.blockchain.ExistingEnterpriseSystems",
        "HyperledgerFabric": "diagrams.ibm.blockchain.HyperledgerFabric",
        "KeyManagement": "diagrams.ibm.blockchain.KeyManagement",
        "Ledger": "diagrams.ibm.blockchain.Ledger",
        "MembershipServicesProviderApi": "diagrams.ibm.blockchain.MembershipServicesProviderApi",
        "Membership": "diagrams.ibm.blockchain.Membership",
        "MessageBus": "diagrams.ibm.blockchain.MessageBus",
        "Node": "diagrams.ibm.blockchain.Node",
        "Services": "diagrams.ibm.blockchain.Services",
        "SmartContract": "diagrams.ibm.blockchain.SmartContract",
        "TransactionManager": "diagrams.ibm.blockchain.TransactionManager",
        "Wallet": "diagrams.ibm.blockchain.Wallet"
    },
    "Compute": {
        "BareMetalServer": "diagrams.ibm.compute.BareMetalServer",
        "ImageService": "diagrams.ibm.compute.ImageService",
        "Instance": "diagrams.ibm.compute.Instance",
        "Key": "diagrams.ibm.compute.Key",
        "PowerInstance": "diagrams.ibm.compute.PowerInstance"
    },
    "Data": {
        "Caches": "diagrams.ibm.data.Caches",
        "Cloud": "diagrams.ibm.data.Cloud",
        "ConversationTrainedDeployed": "diagrams.ibm.data.ConversationTrainedDeployed",
        "DataServices": "diagrams.ibm.data.DataServices",
        "DataSources": "diagrams.ibm.data.DataSources",
        "DeviceIdentityService": "diagrams.ibm.data.DeviceIdentityService",
        "DeviceRegistry": "diagrams.ibm.data.DeviceRegistry",
        "EnterpriseData": "diagrams.ibm.data.EnterpriseData",
        "EnterpriseUserDirectory": "diagrams.ibm.data.EnterpriseUserDirectory",
        "FileRepository": "diagrams.ibm.data.FileRepository",
        "GroundTruth": "diagrams.ibm.data.GroundTruth",
        "Model": "diagrams.ibm.data.Model",
        "TmsDataInterface": "diagrams.ibm.data.TmsDataInterface"
    },
    "DevOps": {
        "ArtifactManagement": "diagrams.ibm.devops.ArtifactManagement",
        "BuildTest": "diagrams.ibm.devops.BuildTest",
        "CodeEditor": "diagrams.ibm.devops.CodeEditor",
        "CollaborativeDevelopment": "diagrams.ibm.devops.CollaborativeDevelopment",
        "ConfigurationManagement": "diagrams.ibm.devops.ConfigurationManagement",
        "ContinuousDeploy": "diagrams.ibm.devops.ContinuousDeploy",
        "ContinuousTesting": "diagrams.ibm.devops.ContinuousTesting",
        "Devops": "diagrams.ibm.devops.Devops",
        "Provision": "diagrams.ibm.devops.Provision",
        "ReleaseManagement": "diagrams.ibm.devops.ReleaseManagement"
    },
    "General": {
        "CloudMessaging": "diagrams.ibm.general.CloudMessaging",
        "CloudServices": "diagrams.ibm.general.CloudServices",
        "Cloudant": "diagrams.ibm.general.Cloudant",
        "CognitiveServices": "diagrams.ibm.general.CognitiveServices",
        "DataSecurity": "diagrams.ibm.general.DataSecurity",
        "Enterprise": "diagrams.ibm.general.Enterprise",
        "GovernanceRiskCompliance": "diagrams.ibm.general.GovernanceRiskCompliance",
        "IBMContainers": "diagrams.ibm.general.IBMContainers",
        "IBMPublicCloud": "diagrams.ibm.general.IBMPublicCloud",
        "IdentityAccessManagement": "diagrams.ibm.general.IdentityAccessManagement",
        "IdentityProvider": "diagrams.ibm.general.IdentityProvider",
        "InfrastructureSecurity": "diagrams.ibm.general.InfrastructureSecurity",
        "Internet": "diagrams.ibm.general.Internet",
        "MicroservicesApplication": "diagrams.ibm.general.MicroservicesApplication",
        "MicroservicesMesh": "diagrams.ibm.general.MicroservicesMesh",
        "MonitoringLogging": "diagrams.ibm.general.MonitoringLogging",
        "Monitoring": "diagrams.ibm.general.Monitoring",
        "ObjectStorage": "diagrams.ibm.general.ObjectStorage",
        "OfflineCapabilities": "diagrams.ibm.general.OfflineCapabilities",
        "Openwhisk": "diagrams.ibm.general.Openwhisk",
        "PeerCloud": "diagrams.ibm.general.PeerCloud",
        "RetrieveRank": "diagrams.ibm.general.RetrieveRank",
        "Scalable": "diagrams.ibm.general.Scalable",
        "ServiceDiscoveryConfiguration": "diagrams.ibm.general.ServiceDiscoveryConfiguration",
        "TextToSpeech": "diagrams.ibm.general.TextToSpeech",
        "TransformationConnectivity": "diagrams.ibm.general.TransformationConnectivity"
    },
    "Infrastructure": {
        "Channels": "diagrams.ibm.infrastructure.Channels",
        "CloudMessaging": "diagrams.ibm.infrastructure.CloudMessaging",
        "Dashboard": "diagrams.ibm.infrastructure.Dashboard",
        "Diagnostics": "diagrams.ibm.infrastructure.Diagnostics",
        "EdgeServices": "diagrams.ibm.infrastructure.EdgeServices",
        "EnterpriseMessaging": "diagrams.ibm.infrastructure.EnterpriseMessaging",
        "EventFeed": "diagrams.ibm.infrastructure.EventFeed",
        "InfrastructureServices": "diagrams.ibm.infrastructure.InfrastructureServices",
        "InterserviceCommunication": "diagrams.ibm.infrastructure.InterserviceCommunication",
        "LoadBalancingRouting": "diagrams.ibm.infrastructure.LoadBalancingRouting",
        "MicroservicesMesh": "diagrams.ibm.infrastructure.MicroservicesMesh",
        "MobileBackend": "diagrams.ibm.infrastructure.MobileBackend",
        "MobileProviderNetwork": "diagrams.ibm.infrastructure.MobileProviderNetwork",
        "MonitoringLogging": "diagrams.ibm.infrastructure.MonitoringLogging",
        "Monitoring": "diagrams.ibm.infrastructure.Monitoring",
        "PeerServices": "diagrams.ibm.infrastructure.PeerServices",
        "ServiceDiscoveryConfiguration": "diagrams.ibm.infrastructure.ServiceDiscoveryConfiguration",
        "TransformationConnectivity": "diagrams.ibm.infrastructure.TransformationConnectivity"
    },
    "Management": {
        "AlertNotification": "diagrams.ibm.management.AlertNotification",
        "ApiManagement": "diagrams.ibm.management.ApiManagement",
        "CloudManagement": "diagrams.ibm.management.CloudManagement",
        "ClusterManagement": "diagrams.ibm.management.ClusterManagement",
        "ContentManagement": "diagrams.ibm.management.ContentManagement",
        "DataServices": "diagrams.ibm.management.DataServices",
        "DeviceManagement": "diagrams.ibm.management.DeviceManagement",
        "InformationGovernance": "diagrams.ibm.management.InformationGovernance",
        "ItServiceManagement": "diagrams.ibm.management.ItServiceManagement",
        "Management": "diagrams.ibm.management.Management",
        "MonitoringMetrics": "diagrams.ibm.management.MonitoringMetrics",
        "ProcessManagement": "diagrams.ibm.management.ProcessManagement",
        "ProviderCloudPortalService": "diagrams.ibm.management.ProviderCloudPortalService",
        "PushNotifications": "diagrams.ibm.management.PushNotifications",
        "ServiceManagementTools": "diagrams.ibm.management.ServiceManagementTools"
    },
    "Network": {
        "Bridge": "diagrams.ibm.network.Bridge",
        "DirectLink": "diagrams.ibm.network.DirectLink",
        "Enterprise": "diagrams.ibm.network.Enterprise",
        "Firewall": "diagrams.ibm.network.Firewall",
        "FloatingIp": "diagrams.ibm.network.FloatingIp",
        "Gateway": "diagrams.ibm.network.Gateway",
        "InternetServices": "diagrams.ibm.network.InternetServices",
        "LoadBalancerListener": "diagrams.ibm.network.LoadBalancerListener",
        "LoadBalancerPool": "diagrams.ibm.network.LoadBalancerPool",
        "LoadBalancer": "diagrams.ibm.network.LoadBalancer",
        "LoadBalancingRouting": "diagrams.ibm.network.LoadBalancingRouting",
        "PublicGateway": "diagrams.ibm.network.PublicGateway",
        "Region": "diagrams.ibm.network.Region",
        "Router": "diagrams.ibm.network.Router",
        "Rules": "diagrams.ibm.network.Rules",
        "Subnet": "diagrams.ibm.network.Subnet",
        "TransitGateway": "diagrams.ibm.network.TransitGateway",
        "Vpc": "diagrams.ibm.network.Vpc",
        "VpnConnection": "diagrams.ibm.network.VpnConnection",
        "VpnGateway": "diagrams.ibm.network.VpnGateway",
        "VpnPolicy": "diagrams.ibm.network.VpnPolicy"
    },
    "Security": {
        "ApiSecurity": "diagrams.ibm.security.ApiSecurity",
        "BlockchainSecurityService": "diagrams.ibm.security.BlockchainSecurityService",
        "DataSecurity": "diagrams.ibm.security.DataSecurity",
        "Firewall": "diagrams.ibm.security.Firewall",
        "Gateway": "diagrams.ibm.security.Gateway",
        "GovernanceRiskCompliance": "diagrams.ibm.security.GovernanceRiskCompliance",
        "IdentityAccessManagement": "diagrams.ibm.security.IdentityAccessManagement",
        "IdentityProvider": "diagrams.ibm.security.IdentityProvider",
        "InfrastructureSecurity": "diagrams.ibm.security.InfrastructureSecurity",
        "PhysicalSecurity": "diagrams.ibm.security.PhysicalSecurity",
        "SecurityMonitoringIntelligence": "diagrams.ibm.security.SecurityMonitoringIntelligence",
        "SecurityServices": "diagrams.ibm.security.SecurityServices",
        "TrustendComputing": "diagrams.ibm.security.TrustendComputing",
        "Vpn": "diagrams.ibm.security.Vpn"
    },
    "Social": {
        "Communities": "diagrams.ibm.social.Communities",
        "FileSync": "diagrams.ibm.social.FileSync",
        "LiveCollaboration": "diagrams.ibm.social.LiveCollaboration",
        "Messaging": "diagrams.ibm.social.Messaging",
        "Networking": "diagrams.ibm.social.Networking"
    },
    "Storage": {
        "BlockStorage": "diagrams.ibm.storage.BlockStorage",
        "ObjectStorage": "diagrams.ibm.storage.ObjectStorage"
    },
    "User": {
        "Browser": "diagrams.ibm.user.Browser",
        "Device": "diagrams.ibm.user.Device",
        "IntegratedDigitalExperiences": "diagrams.ibm.user.IntegratedDigitalExperiences",
        "PhysicalEntity": "diagrams.ibm.user.PhysicalEntity",
        "Sensor": "diagrams.ibm.user.Sensor",
        "User": "diagrams.ibm.user.User"
    }
}

# Comprehensive K8S components dictionary
K8S_COMPONENTS = {
    "Chaos": {
        "ChaosMesh": "diagrams.k8s.chaos.ChaosMesh",
        "LitmusChaos": "diagrams.k8s.chaos.LitmusChaos"
    },
    "ClusterConfig": {
        "HPA": "diagrams.k8s.clusterconfig.HPA",  # HorizontalPodAutoscaler (alias)
        "Limits": "diagrams.k8s.clusterconfig.Limits",  # LimitRange (alias)
        "Quota": "diagrams.k8s.clusterconfig.Quota"
    },
    "Compute": {
        "Cronjob": "diagrams.k8s.compute.Cronjob",
        "Deploy": "diagrams.k8s.compute.Deploy",  # Deployment (alias)
        "DS": "diagrams.k8s.compute.DS",  # DaemonSet (alias)
        "Job": "diagrams.k8s.compute.Job",
        "Pod": "diagrams.k8s.compute.Pod",
        "RS": "diagrams.k8s.compute.RS",  # ReplicaSet (alias)
        "STS": "diagrams.k8s.compute.STS"  # StatefulSet (alias)
    },
    "ControlPlane": {
        "API": "diagrams.k8s.controlplane.API",  # APIServer (alias)
        "CCM": "diagrams.k8s.controlplane.CCM",
        "CM": "diagrams.k8s.controlplane.CM",  # ControllerManager (alias)
        "KProxy": "diagrams.k8s.controlplane.KProxy",  # KubeProxy (alias)
        "Kubelet": "diagrams.k8s.controlplane.Kubelet",
        "Sched": "diagrams.k8s.controlplane.Sched"  # Scheduler (alias)
    },
    "Ecosystem": {
        "ExternalDns": "diagrams.k8s.ecosystem.ExternalDns",
        "Helm": "diagrams.k8s.ecosystem.Helm",
        "Krew": "diagrams.k8s.ecosystem.Krew",
        "Kustomize": "diagrams.k8s.ecosystem.Kustomize"
    },
    "Group": {
        "NS": "diagrams.k8s.group.NS"  # Namespace (alias)
    },
    "Infra": {
        "ETCD": "diagrams.k8s.infra.ETCD",
        "Master": "diagrams.k8s.infra.Master",
        "Node": "diagrams.k8s.infra.Node"
    },
    "Network": {
        "Ep": "diagrams.k8s.network.Ep",  # Endpoint (alias)
        "Ing": "diagrams.k8s.network.Ing",  # Ingress (alias)
        "Netpol": "diagrams.k8s.network.Netpol",  # NetworkPolicy (alias)
        "SVC": "diagrams.k8s.network.SVC"  # Service (alias)
    },
    "Others": {
        "CRD": "diagrams.k8s.others.CRD",
        "PSP": "diagrams.k8s.others.PSP"
    },
    "PodConfig": {
        "CM": "diagrams.k8s.podconfig.CM",  # ConfigMap (alias)
        "Secret": "diagrams.k8s.podconfig.Secret"
    },
    "RBAC": {
        "CRole": "diagrams.k8s.rbac.CRole",  # ClusterRole (alias)
        "CRB": "diagrams.k8s.rbac.CRB",  # ClusterRoleBinding (alias)
        "Group": "diagrams.k8s.rbac.Group",
        "RB": "diagrams.k8s.rbac.RB",  # RoleBinding (alias)
        "Role": "diagrams.k8s.rbac.Role",
        "SA": "diagrams.k8s.rbac.SA",  # ServiceAccount (alias)
        "User": "diagrams.k8s.rbac.User"
    },
    "Storage": {
        "PV": "diagrams.k8s.storage.PV",  # PersistentVolume (alias)
        "PVC": "diagrams.k8s.storage.PVC",  # PersistentVolumeClaim (alias)
        "SC": "diagrams.k8s.storage.SC",  # StorageClass (alias)
        "Vol": "diagrams.k8s.storage.Vol"  # Volume (alias)
    }
}

# Comprehensive OCI components dictionary
OCI_COMPONENTS = {
    "Compute": {
        "AutoscaleWhite": "diagrams.oci.compute.AutoscaleWhite",
        "Autoscale": "diagrams.oci.compute.Autoscale",
        "BMWhite": "diagrams.oci.compute.BMWhite",  # BareMetalWhite (alias)
        "BM": "diagrams.oci.compute.BM",  # BareMetal (alias)
        "ContainerWhite": "diagrams.oci.compute.ContainerWhite",
        "Container": "diagrams.oci.compute.Container",
        "FunctionsWhite": "diagrams.oci.compute.FunctionsWhite",
        "Functions": "diagrams.oci.compute.Functions",
        "InstancePoolsWhite": "diagrams.oci.compute.InstancePoolsWhite",
        "InstancePools": "diagrams.oci.compute.InstancePools",
        "OCIRWhite": "diagrams.oci.compute.OCIRWhite",  # OCIRegistryWhite (alias)
        "OCIR": "diagrams.oci.compute.OCIR",  # OCIRegistry (alias)
        "OKEWhite": "diagrams.oci.compute.OKEWhite",  # ContainerEngineWhite (alias)
        "OKE": "diagrams.oci.compute.OKE",  # ContainerEngine (alias)
        "VMWhite": "diagrams.oci.compute.VMWhite",  # VirtualMachineWhite (alias)
        "VM": "diagrams.oci.compute.VM"  # VirtualMachine (alias)
    },
    "Connectivity": {
        "BackboneWhite": "diagrams.oci.connectivity.BackboneWhite",
        "Backbone": "diagrams.oci.connectivity.Backbone",
        "CDNWhite": "diagrams.oci.connectivity.CDNWhite",
        "CDN": "diagrams.oci.connectivity.CDN",
        "CustomerDatacenter": "diagrams.oci.connectivity.CustomerDatacenter",
        "CustomerDatacntrWhite": "diagrams.oci.connectivity.CustomerDatacntrWhite",
        "CustomerPremiseWhite": "diagrams.oci.connectivity.CustomerPremiseWhite",
        "CustomerPremise": "diagrams.oci.connectivity.CustomerPremise",
        "DisconnectedRegionsWhite": "diagrams.oci.connectivity.DisconnectedRegionsWhite",
        "DisconnectedRegions": "diagrams.oci.connectivity.DisconnectedRegions",
        "DNSWhite": "diagrams.oci.connectivity.DNSWhite",
        "DNS": "diagrams.oci.connectivity.DNS",
        "FastConnectWhite": "diagrams.oci.connectivity.FastConnectWhite",
        "FastConnect": "diagrams.oci.connectivity.FastConnect",
        "InternetGatewayWhite": "diagrams.oci.connectivity.InternetGatewayWhite",
        "InternetGateway": "diagrams.oci.connectivity.InternetGateway",
        "NATGatewayWhite": "diagrams.oci.connectivity.NATGatewayWhite",
        "NATGateway": "diagrams.oci.connectivity.NATGateway",
        "VPNWhite": "diagrams.oci.connectivity.VPNWhite",
        "VPN": "diagrams.oci.connectivity.VPN"
    },
    "Database": {
        "AutonomousWhite": "diagrams.oci.database.AutonomousWhite",  # ADBWhite (alias)
        "Autonomous": "diagrams.oci.database.Autonomous",  # ADB (alias)
        "BigdataServiceWhite": "diagrams.oci.database.BigdataServiceWhite",
        "BigdataService": "diagrams.oci.database.BigdataService",
        "DatabaseServiceWhite": "diagrams.oci.database.DatabaseServiceWhite",  # DBServiceWhite (alias)
        "DatabaseService": "diagrams.oci.database.DatabaseService",  # DBService (alias)
        "DataflowApacheWhite": "diagrams.oci.database.DataflowApacheWhite",
        "DataflowApache": "diagrams.oci.database.DataflowApache",
        "DcatWhite": "diagrams.oci.database.DcatWhite",
        "Dcat": "diagrams.oci.database.Dcat",
        "DMSWhite": "diagrams.oci.database.DMSWhite",
        "DMS": "diagrams.oci.database.DMS",
        "DisWhite": "diagrams.oci.database.DisWhite",
        "Dis": "diagrams.oci.database.Dis",
        "ScienceWhite": "diagrams.oci.database.ScienceWhite",
        "Science": "diagrams.oci.database.Science",
        "StreamWhite": "diagrams.oci.database.StreamWhite",
        "Stream": "diagrams.oci.database.Stream"
    },
    "DevOps": {
        "APIGatewayWhite": "diagrams.oci.devops.APIGatewayWhite",
        "APIGateway": "diagrams.oci.devops.APIGateway",
        "APIServiceWhite": "diagrams.oci.devops.APIServiceWhite",
        "APIService": "diagrams.oci.devops.APIService",
        "ResourceMgmtWhite": "diagrams.oci.devops.ResourceMgmtWhite",
        "ResourceMgmt": "diagrams.oci.devops.ResourceMgmt"
    },
    "Governance": {
        "AuditWhite": "diagrams.oci.governance.AuditWhite",
        "Audit": "diagrams.oci.governance.Audit",
        "CompartmentsWhite": "diagrams.oci.governance.CompartmentsWhite",
        "Compartments": "diagrams.oci.governance.Compartments",
        "GroupsWhite": "diagrams.oci.governance.GroupsWhite",
        "Groups": "diagrams.oci.governance.Groups",
        "LoggingWhite": "diagrams.oci.governance.LoggingWhite",
        "Logging": "diagrams.oci.governance.Logging",
        "OCIDWhite": "diagrams.oci.governance.OCIDWhite",
        "OCID": "diagrams.oci.governance.OCID",
        "PoliciesWhite": "diagrams.oci.governance.PoliciesWhite",
        "Policies": "diagrams.oci.governance.Policies",
        "TaggingWhite": "diagrams.oci.governance.TaggingWhite",
        "Tagging": "diagrams.oci.governance.Tagging"
    },
    "Monitoring": {
        "AlarmWhite": "diagrams.oci.monitoring.AlarmWhite",
        "Alarm": "diagrams.oci.monitoring.Alarm",
        "EmailWhite": "diagrams.oci.monitoring.EmailWhite",
        "Email": "diagrams.oci.monitoring.Email",
        "EventsWhite": "diagrams.oci.monitoring.EventsWhite",
        "Events": "diagrams.oci.monitoring.Events",
        "HealthCheckWhite": "diagrams.oci.monitoring.HealthCheckWhite",
        "HealthCheck": "diagrams.oci.monitoring.HealthCheck",
        "NotificationsWhite": "diagrams.oci.monitoring.NotificationsWhite",
        "Notifications": "diagrams.oci.monitoring.Notifications",
        "QueueWhite": "diagrams.oci.monitoring.QueueWhite",
        "Queue": "diagrams.oci.monitoring.Queue",
        "SearchWhite": "diagrams.oci.monitoring.SearchWhite",
        "Search": "diagrams.oci.monitoring.Search",
        "TelemetryWhite": "diagrams.oci.monitoring.TelemetryWhite",
        "Telemetry": "diagrams.oci.monitoring.Telemetry",
        "WorkflowWhite": "diagrams.oci.monitoring.WorkflowWhite",
        "Workflow": "diagrams.oci.monitoring.Workflow"
    },
    "Network": {
        "DrgWhite": "diagrams.oci.network.DrgWhite",
        "Drg": "diagrams.oci.network.Drg",
        "FirewallWhite": "diagrams.oci.network.FirewallWhite",
        "Firewall": "diagrams.oci.network.Firewall",
        "InternetGatewayWhite": "diagrams.oci.network.InternetGatewayWhite",
        "InternetGateway": "diagrams.oci.network.InternetGateway",
        "LoadBalancerWhite": "diagrams.oci.network.LoadBalancerWhite",
        "LoadBalancer": "diagrams.oci.network.LoadBalancer",
        "RouteTableWhite": "diagrams.oci.network.RouteTableWhite",
        "RouteTable": "diagrams.oci.network.RouteTable",
        "SecurityListsWhite": "diagrams.oci.network.SecurityListsWhite",
        "SecurityLists": "diagrams.oci.network.SecurityLists",
        "ServiceGatewayWhite": "diagrams.oci.network.ServiceGatewayWhite",
        "ServiceGateway": "diagrams.oci.network.ServiceGateway",
        "VcnWhite": "diagrams.oci.network.VcnWhite",
        "Vcn": "diagrams.oci.network.Vcn"
    },
    "Security": {
        "CloudGuardWhite": "diagrams.oci.security.CloudGuardWhite",
        "CloudGuard": "diagrams.oci.security.CloudGuard",
        "DDOSWhite": "diagrams.oci.security.DDOSWhite",
        "DDOS": "diagrams.oci.security.DDOS",
        "EncryptionWhite": "diagrams.oci.security.EncryptionWhite",
        "Encryption": "diagrams.oci.security.Encryption",
        "IDAccessWhite": "diagrams.oci.security.IDAccessWhite",
        "IDAccess": "diagrams.oci.security.IDAccess",
        "KeyManagementWhite": "diagrams.oci.security.KeyManagementWhite",
        "KeyManagement": "diagrams.oci.security.KeyManagement",
        "MaxSecurityZoneWhite": "diagrams.oci.security.MaxSecurityZoneWhite",
        "MaxSecurityZone": "diagrams.oci.security.MaxSecurityZone",
        "VaultWhite": "diagrams.oci.security.VaultWhite",
        "Vault": "diagrams.oci.security.Vault",
        "WAFWhite": "diagrams.oci.security.WAFWhite",
        "WAF": "diagrams.oci.security.WAF"
    },
    "Storage": {
        "BackupRestoreWhite": "diagrams.oci.storage.BackupRestoreWhite",
        "BackupRestore": "diagrams.oci.storage.BackupRestore",
        "BlockStorageCloneWhite": "diagrams.oci.storage.BlockStorageCloneWhite",
        "BlockStorageClone": "diagrams.oci.storage.BlockStorageClone",
        "BlockStorageWhite": "diagrams.oci.storage.BlockStorageWhite",
        "BlockStorage": "diagrams.oci.storage.BlockStorage",
        "BucketsWhite": "diagrams.oci.storage.BucketsWhite",
        "Buckets": "diagrams.oci.storage.Buckets",
        "DataTransferWhite": "diagrams.oci.storage.DataTransferWhite",
        "DataTransfer": "diagrams.oci.storage.DataTransfer",
        "ElasticPerformanceWhite": "diagrams.oci.storage.ElasticPerformanceWhite",
        "ElasticPerformance": "diagrams.oci.storage.ElasticPerformance",
        "FileStorageWhite": "diagrams.oci.storage.FileStorageWhite",
        "FileStorage": "diagrams.oci.storage.FileStorage",
        "ObjectStorageWhite": "diagrams.oci.storage.ObjectStorageWhite",
        "ObjectStorage": "diagrams.oci.storage.ObjectStorage",
        "StorageGatewayWhite": "diagrams.oci.storage.StorageGatewayWhite",
        "StorageGateway": "diagrams.oci.storage.StorageGateway"
    }
}

# Comprehensive On-Prem components dictionary
ONPREM_COMPONENTS = {
    "Aggregator": {
        "Fluentd": "diagrams.onprem.aggregator.Fluentd",
        "Vector": "diagrams.onprem.aggregator.Vector"
    },
    "Analytics": {
        "Beam": "diagrams.onprem.analytics.Beam",
        "Databricks": "diagrams.onprem.analytics.Databricks",
        "Dbt": "diagrams.onprem.analytics.Dbt",
        "Dremio": "diagrams.onprem.analytics.Dremio",
        "Flink": "diagrams.onprem.analytics.Flink",
        "Hadoop": "diagrams.onprem.analytics.Hadoop",
        "Hive": "diagrams.onprem.analytics.Hive",
        "Metabase": "diagrams.onprem.analytics.Metabase",
        "Norikra": "diagrams.onprem.analytics.Norikra",
        "Powerbi": "diagrams.onprem.analytics.Powerbi",  # PowerBI (alias)
        "Presto": "diagrams.onprem.analytics.Presto",
        "Singer": "diagrams.onprem.analytics.Singer",
        "Spark": "diagrams.onprem.analytics.Spark",
        "Storm": "diagrams.onprem.analytics.Storm",
        "Superset": "diagrams.onprem.analytics.Superset",
        "Tableau": "diagrams.onprem.analytics.Tableau"
    },
    "Auth": {
        "Boundary": "diagrams.onprem.auth.Boundary",
        "BuzzfeedSso": "diagrams.onprem.auth.BuzzfeedSso",
        "Oauth2Proxy": "diagrams.onprem.auth.Oauth2Proxy"
    },
    "CD": {
        "Spinnaker": "diagrams.onprem.cd.Spinnaker",
        "TektonCli": "diagrams.onprem.cd.TektonCli",
        "Tekton": "diagrams.onprem.cd.Tekton"
    },
    "Certificates": {
        "CertManager": "diagrams.onprem.certificates.CertManager",
        "LetsEncrypt": "diagrams.onprem.certificates.LetsEncrypt"
    },
    "CI": {
        "Circleci": "diagrams.onprem.ci.Circleci",  # CircleCI (alias)
        "Concourseci": "diagrams.onprem.ci.Concourseci",  # ConcourseCI (alias)
        "Droneci": "diagrams.onprem.ci.Droneci",  # DroneCI (alias)
        "GithubActions": "diagrams.onprem.ci.GithubActions",
        "Gitlabci": "diagrams.onprem.ci.Gitlabci",  # GitlabCI (alias)
        "Jenkins": "diagrams.onprem.ci.Jenkins",
        "Teamcity": "diagrams.onprem.ci.Teamcity",  # TC (alias)
        "Travisci": "diagrams.onprem.ci.Travisci",  # TravisCI (alias)
        "Zuulci": "diagrams.onprem.ci.Zuulci"  # ZuulCI (alias)
    },
    "Client": {
        "Client": "diagrams.onprem.client.Client",
        "User": "diagrams.onprem.client.User",
        "Users": "diagrams.onprem.client.Users"
    },
    "Compute": {
        "Nomad": "diagrams.onprem.compute.Nomad",
        "Server": "diagrams.onprem.compute.Server"
    },
    "Container": {
        "Containerd": "diagrams.onprem.container.Containerd",
        "Crio": "diagrams.onprem.container.Crio",
        "Docker": "diagrams.onprem.container.Docker",
        "Firecracker": "diagrams.onprem.container.Firecracker",
        "Gvisor": "diagrams.onprem.container.Gvisor",
        "K3S": "diagrams.onprem.container.K3S",
        "Lxc": "diagrams.onprem.container.Lxc",  # LXC (alias)
        "Rkt": "diagrams.onprem.container.Rkt",  # RKT (alias)
    },
    "Database": {
        "Cassandra": "diagrams.onprem.database.Cassandra",
        "Clickhouse": "diagrams.onprem.database.Clickhouse",  # ClickHouse (alias)
        "Cockroachdb": "diagrams.onprem.database.Cockroachdb",  # CockroachDB (alias)
        "Couchbase": "diagrams.onprem.database.Couchbase",
        "Couchdb": "diagrams.onprem.database.Couchdb",  # CouchDB (alias)
        "Dgraph": "diagrams.onprem.database.Dgraph",
        "Druid": "diagrams.onprem.database.Druid",
        "Hbase": "diagrams.onprem.database.Hbase",  # HBase (alias)
        "Influxdb": "diagrams.onprem.database.Influxdb",  # InfluxDB (alias)
        "Janusgraph": "diagrams.onprem.database.Janusgraph",  # JanusGraph (alias)
        "Mariadb": "diagrams.onprem.database.Mariadb",  # MariaDB (alias)
        "Mongodb": "diagrams.onprem.database.Mongodb",  # MongoDB (alias)
        "Mssql": "diagrams.onprem.database.Mssql",  # MSSQL (alias)
        "Mysql": "diagrams.onprem.database.Mysql",  # MySQL (alias)
        "Neo4J": "diagrams.onprem.database.Neo4J",
        "Oracle": "diagrams.onprem.database.Oracle",
        "Postgresql": "diagrams.onprem.database.Postgresql",  # PostgreSQL (alias)
        "Scylla": "diagrams.onprem.database.Scylla"
    },
    "DNS": {
        "Coredns": "diagrams.onprem.dns.Coredns",
        "Powerdns": "diagrams.onprem.dns.Powerdns"
    },
    "ETL": {
        "Embulk": "diagrams.onprem.etl.Embulk"
    },
    "GitOps": {
        "Argocd": "diagrams.onprem.gitops.Argocd",  # ArgoCD (alias)
        "Flagger": "diagrams.onprem.gitops.Flagger",
        "Flux": "diagrams.onprem.gitops.Flux"
    },
    "Groupware": {
        "Nextcloud": "diagrams.onprem.groupware.Nextcloud"
    },
    "IaC": {
        "Ansible": "diagrams.onprem.iac.Ansible",
        "Atlantis": "diagrams.onprem.iac.Atlantis",
        "Awx": "diagrams.onprem.iac.Awx",
        "Puppet": "diagrams.onprem.iac.Puppet",
        "Terraform": "diagrams.onprem.iac.Terraform"
    },
    "Identity": {
        "Dex": "diagrams.onprem.identity.Dex"
    },
    "InMemory": {
        "Aerospike": "diagrams.onprem.inmemory.Aerospike",
        "Hazelcast": "diagrams.onprem.inmemory.Hazelcast",
        "Memcached": "diagrams.onprem.inmemory.Memcached",
        "Redis": "diagrams.onprem.inmemory.Redis"
    },
    "Logging": {
        "Fluentbit": "diagrams.onprem.logging.Fluentbit",  # FluentBit (alias)
        "Graylog": "diagrams.onprem.logging.Graylog",
        "Loki": "diagrams.onprem.logging.Loki",
        "Rsyslog": "diagrams.onprem.logging.Rsyslog",  # RSyslog (alias)
        "SyslogNg": "diagrams.onprem.logging.SyslogNg"
    },
    "MLOps": {
        "Mlflow": "diagrams.onprem.mlops.Mlflow",
        "Polyaxon": "diagrams.onprem.mlops.Polyaxon"
    },
    "Monitoring": {
        "Cortex": "diagrams.onprem.monitoring.Cortex",
        "Datadog": "diagrams.onprem.monitoring.Datadog",
        "Dynatrace": "diagrams.onprem.monitoring.Dynatrace",
        "Grafana": "diagrams.onprem.monitoring.Grafana",
        "Humio": "diagrams.onprem.monitoring.Humio",
        "Nagios": "diagrams.onprem.monitoring.Nagios",
        "Newrelic": "diagrams.onprem.monitoring.Newrelic",
        "PrometheusOperator": "diagrams.onprem.monitoring.PrometheusOperator",
        "Prometheus": "diagrams.onprem.monitoring.Prometheus",
        "Sentry": "diagrams.onprem.monitoring.Sentry",
        "Splunk": "diagrams.onprem.monitoring.Splunk",
        "Thanos": "diagrams.onprem.monitoring.Thanos",
        "Zabbix": "diagrams.onprem.monitoring.Zabbix"
    },
    "Network": {
        "Ambassador": "diagrams.onprem.network.Ambassador",
        "Apache": "diagrams.onprem.network.Apache",
        "Bind9": "diagrams.onprem.network.Bind9",
        "Caddy": "diagrams.onprem.network.Caddy",
        "Consul": "diagrams.onprem.network.Consul",
        "Envoy": "diagrams.onprem.network.Envoy",
        "Etcd": "diagrams.onprem.network.Etcd",  # ETCD (alias)
        "Glassfish": "diagrams.onprem.network.Glassfish",
        "Gunicorn": "diagrams.onprem.network.Gunicorn",
        "Haproxy": "diagrams.onprem.network.Haproxy",  # HAProxy (alias)
        "Internet": "diagrams.onprem.network.Internet",
        "Istio": "diagrams.onprem.network.Istio",
        "Jbossas": "diagrams.onprem.network.Jbossas",
        "Jetty": "diagrams.onprem.network.Jetty",
        "Kong": "diagrams.onprem.network.Kong",
        "Linkerd": "diagrams.onprem.network.Linkerd",
        "Nginx": "diagrams.onprem.network.Nginx",
        "Ocelot": "diagrams.onprem.network.Ocelot",
        "OpenServiceMesh": "diagrams.onprem.network.OpenServiceMesh",  # OSM (alias)
        "Opnsense": "diagrams.onprem.network.Opnsense",  # OPNSense (alias)
        "Pfsense": "diagrams.onprem.network.Pfsense",  # PFSense (alias)
        "Pomerium": "diagrams.onprem.network.Pomerium",
        "Powerdns": "diagrams.onprem.network.Powerdns",
        "Tomcat": "diagrams.onprem.network.Tomcat",
        "Traefik": "diagrams.onprem.network.Traefik",
        "Tyk": "diagrams.onprem.network.Tyk",
        "Vyos": "diagrams.onprem.network.Vyos",  # VyOS (alias)
        "Wildfly": "diagrams.onprem.network.Wildfly",
        "Yarp": "diagrams.onprem.network.Yarp",
        "Zookeeper": "diagrams.onprem.network.Zookeeper"
    },
    "Proxmox": {
        "Pve": "diagrams.onprem.proxmox.Pve"  # ProxmoxVE (alias)
    },
    "Queue": {
        "Activemq": "diagrams.onprem.queue.Activemq",  # ActiveMQ (alias)
        "Celery": "diagrams.onprem.queue.Celery",
        "Emqx": "diagrams.onprem.queue.Emqx",  # EMQX (alias)
        "Kafka": "diagrams.onprem.queue.Kafka",
        "Nats": "diagrams.onprem.queue.Nats",
        "Rabbitmq": "diagrams.onprem.queue.Rabbitmq",  # RabbitMQ (alias)
        "Zeromq": "diagrams.onprem.queue.Zeromq"  # ZeroMQ (alias)
    },
    "Registry": {
        "Harbor": "diagrams.onprem.registry.Harbor",
        "Jfrog": "diagrams.onprem.registry.Jfrog"
    },
    "Search": {
        "Solr": "diagrams.onprem.search.Solr"
    },
    "Security": {
        "Bitwarden": "diagrams.onprem.security.Bitwarden",
        "Trivy": "diagrams.onprem.security.Trivy",
        "Vault": "diagrams.onprem.security.Vault"
    },
    "Storage": {
        "CephOsd": "diagrams.onprem.storage.CephOsd",  # CEPH_OSD (alias)
        "Ceph": "diagrams.onprem.storage.Ceph",  # CEPH (alias)
        "Glusterfs": "diagrams.onprem.storage.Glusterfs",
        "Portworx": "diagrams.onprem.storage.Portworx"
    },
    "Tracing": {
        "Jaeger": "diagrams.onprem.tracing.Jaeger"
    },
    "VCS": {
        "Git": "diagrams.onprem.vcs.Git",
        "Gitea": "diagrams.onprem.vcs.Gitea",
        "Github": "diagrams.onprem.vcs.Github",
        "Gitlab": "diagrams.onprem.vcs.Gitlab",
        "Svn": "diagrams.onprem.vcs.Svn"
    },
    "Workflow": {
        "Airflow": "diagrams.onprem.workflow.Airflow",
        "Digdag": "diagrams.onprem.workflow.Digdag",
        "Kubeflow": "diagrams.onprem.workflow.Kubeflow",  # KubeFlow (alias)
        "Nifi": "diagrams.onprem.workflow.Nifi"  # NiFi (alias)
    }
}

# Comprehensive OpenStack components dictionary
OPENSTACK_COMPONENTS = {
    "APIProxies": {
        "EC2API": "diagrams.openstack.apiproxies.EC2API"
    },
    "ApplicationLifecycle": {
        "Freezer": "diagrams.openstack.applicationlifecycle.Freezer",
        "Masakari": "diagrams.openstack.applicationlifecycle.Masakari",
        "Murano": "diagrams.openstack.applicationlifecycle.Murano",
        "Solum": "diagrams.openstack.applicationlifecycle.Solum"
    },
    "BareMetal": {
        "Cyborg": "diagrams.openstack.baremetal.Cyborg",
        "Ironic": "diagrams.openstack.baremetal.Ironic"
    },
    "Billing": {
        "Cloudkitty": "diagrams.openstack.billing.Cloudkitty",  # CloudKitty (alias)
    },
    "Compute": {
        "Nova": "diagrams.openstack.compute.Nova",
        "Qinling": "diagrams.openstack.compute.Qinling",
        "Zun": "diagrams.openstack.compute.Zun"
    },
    "ContainerServices": {
        "Kuryr": "diagrams.openstack.containerservices.Kuryr"
    },
    "Deployment": {
        "Ansible": "diagrams.openstack.deployment.Ansible",
        "Charms": "diagrams.openstack.deployment.Charms",
        "Chef": "diagrams.openstack.deployment.Chef",
        "Helm": "diagrams.openstack.deployment.Helm",
        "Kolla": "diagrams.openstack.deployment.Kolla",  # KollaAnsible (alias)
        "Tripleo": "diagrams.openstack.deployment.Tripleo"  # TripleO (alias)
    },
    "Frontend": {
        "Horizon": "diagrams.openstack.frontend.Horizon"
    },
    "Monitoring": {
        "Monasca": "diagrams.openstack.monitoring.Monasca",
        "Telemetry": "diagrams.openstack.monitoring.Telemetry"
    },
    "MultiRegion": {
        "Tricircle": "diagrams.openstack.multiregion.Tricircle"
    },
    "Networking": {
        "Designate": "diagrams.openstack.networking.Designate",
        "Neutron": "diagrams.openstack.networking.Neutron",
        "Octavia": "diagrams.openstack.networking.Octavia"
    },
    "NFV": {
        "Tacker": "diagrams.openstack.nfv.Tacker"
    },
    "Optimization": {
        "Congress": "diagrams.openstack.optimization.Congress",
        "Rally": "diagrams.openstack.optimization.Rally",
        "Vitrage": "diagrams.openstack.optimization.Vitrage",
        "Watcher": "diagrams.openstack.optimization.Watcher"
    },
    "Orchestration": {
        "Blazar": "diagrams.openstack.orchestration.Blazar",
        "Heat": "diagrams.openstack.orchestration.Heat",
        "Mistral": "diagrams.openstack.orchestration.Mistral",
        "Senlin": "diagrams.openstack.orchestration.Senlin",
        "Zaqar": "diagrams.openstack.orchestration.Zaqar"
    },
    "Packaging": {
        "LOCI": "diagrams.openstack.packaging.LOCI",
        "Puppet": "diagrams.openstack.packaging.Puppet",
        "RPM": "diagrams.openstack.packaging.RPM"
    },
    "SharedServices": {
        "Barbican": "diagrams.openstack.sharedservices.Barbican",
        "Glance": "diagrams.openstack.sharedservices.Glance",
        "Karbor": "diagrams.openstack.sharedservices.Karbor",
        "Keystone": "diagrams.openstack.sharedservices.Keystone",
        "Searchlight": "diagrams.openstack.sharedservices.Searchlight"
    },
    "Storage": {
        "Cinder": "diagrams.openstack.storage.Cinder",
        "Manila": "diagrams.openstack.storage.Manila",
        "Swift": "diagrams.openstack.storage.Swift"
    },
    "User": {
        "Openstackclient": "diagrams.openstack.user.Openstackclient"  # OpenStackClient (alias)
    },
    "WorkloadProvisioning": {
        "Magnum": "diagrams.openstack.workloadprovisioning.Magnum",
        "Sahara": "diagrams.openstack.workloadprovisioning.Sahara",
        "Trove": "diagrams.openstack.workloadprovisioning.Trove"
    }
}

# Comprehensive Outscale components dictionary
OUTSCALE_COMPONENTS = {
    "Compute": {
        "Compute": "diagrams.outscale.compute.Compute",
        "DirectConnect": "diagrams.outscale.compute.DirectConnect"
    },
    "Network": {
        "ClientVpn": "diagrams.outscale.network.ClientVpn",
        "InternetService": "diagrams.outscale.network.InternetService",
        "LoadBalancer": "diagrams.outscale.network.LoadBalancer",
        "NatService": "diagrams.outscale.network.NatService",
        "Net": "diagrams.outscale.network.Net",
        "SiteToSiteVpn": "diagrams.outscale.network.SiteToSiteVpng"
    },
    "Security": {
        "Firewall": "diagrams.outscale.security.Firewall",
        "IdentityAndAccessManagement": "diagrams.outscale.security.IdentityAndAccessManagement"
    },
    "Storage": {
        "SimpleStorageService": "diagrams.outscale.storage.SimpleStorageService",
        "Storage": "diagrams.outscale.storage.Storage"
    }
}

# Comprehensive Programming components dictionary
PROGRAMMING_COMPONENTS = {
    "Flowchart": {
        "Action": "diagrams.programming.flowchart.Action",
        "Collate": "diagrams.programming.flowchart.Collate",
        "Database": "diagrams.programming.flowchart.Database",
        "Decision": "diagrams.programming.flowchart.Decision",
        "Delay": "diagrams.programming.flowchart.Delay",
        "Display": "diagrams.programming.flowchart.Display",
        "Document": "diagrams.programming.flowchart.Document",
        "InputOutput": "diagrams.programming.flowchart.InputOutput",
        "Inspection": "diagrams.programming.flowchart.Inspection",
        "InternalStorage": "diagrams.programming.flowchart.InternalStorage",
        "LoopLimit": "diagrams.programming.flowchart.LoopLimit",
        "ManualInput": "diagrams.programming.flowchart.ManualInput",
        "ManualLoop": "diagrams.programming.flowchart.ManualLoop",
        "Merge": "diagrams.programming.flowchart.Merge",
        "MultipleDocuments": "diagrams.programming.flowchart.MultipleDocuments",
        "OffPageConnectorLeft": "diagrams.programming.flowchart.OffPageConnectorLeft",
        "OffPageConnectorRight": "diagrams.programming.flowchart.OffPageConnectorRight",
        "Or": "diagrams.programming.flowchart.Or",
        "PredefinedProcess": "diagrams.programming.flowchart.PredefinedProcess",
        "Preparation": "diagrams.programming.flowchart.Preparation",
        "Sort": "diagrams.programming.flowchart.Sort",
        "StartEnd": "diagrams.programming.flowchart.StartEnd",
        "StoredData": "diagrams.programming.flowchart.StoredData",
        "SummingJunction": "diagrams.programming.flowchart.SummingJunction"
    },
    "Framework": {
        "Angular": "diagrams.programming.framework.Angular",
        "Backbone": "diagrams.programming.framework.Backbone",
        "Django": "diagrams.programming.framework.Django",
        "Ember": "diagrams.programming.framework.Ember",
        "Fastapi": "diagrams.programming.framework.Fastapi",  # FastAPI (alias)
        "Flask": "diagrams.programming.framework.Flask",
        "Flutter": "diagrams.programming.framework.Flutter",
        "Graphql": "diagrams.programming.framework.Graphql",  # GraphQL (alias)
        "Laravel": "diagrams.programming.framework.Laravel",
        "Micronaut": "diagrams.programming.framework.Micronaut",
        "Rails": "diagrams.programming.framework.Rails",
        "React": "diagrams.programming.framework.React",
        "Spring": "diagrams.programming.framework.Spring",
        "Starlette": "diagrams.programming.framework.Starlette",
        "Svelte": "diagrams.programming.framework.Svelte",
        "Vue": "diagrams.programming.framework.Vue"
    },
    "Language": {
        "Bash": "diagrams.programming.language.Bash",
        "C": "diagrams.programming.language.C",
        "Cpp": "diagrams.programming.language.Cpp",
        "Csharp": "diagrams.programming.language.Csharp",
        "Dart": "diagrams.programming.language.Dart",
        "Elixir": "diagrams.programming.language.Elixir",
        "Erlang": "diagrams.programming.language.Erlang",
        "Go": "diagrams.programming.language.Go",
        "Java": "diagrams.programming.language.Java",
        "Javascript": "diagrams.programming.language.Javascript",  # JavaScript (alias)
        "Kotlin": "diagrams.programming.language.Kotlin",
        "Latex": "diagrams.programming.language.Latex",
        "Matlab": "diagrams.programming.language.Matlab",
        "Nodejs": "diagrams.programming.language.Nodejs",  # NodeJS (alias)
        "Php": "diagrams.programming.language.Php",  # PHP (alias)
        "Python": "diagrams.programming.language.Python",
        "R": "diagrams.programming.language.R",
        "Ruby": "diagrams.programming.language.Ruby",
        "Rust": "diagrams.programming.language.Rust",
        "Scala": "diagrams.programming.language.Scala",
        "Swift": "diagrams.programming.language.Swift",
        "Typescript": "diagrams.programming.language.Typescript"  # TypeScript (alias)
    },
    "Runtime": {
        "Dapr": "diagrams.programming.runtime.Dapr"
    }
}

# Comprehensive SaaS components dictionary
SAAS_COMPONENTS = {
    "Alerting": {
        "Newrelic": "diagrams.saas.alerting.Newrelic",
        "Opsgenie": "diagrams.saas.alerting.Opsgenie",
        "Pushover": "diagrams.saas.alerting.Pushover",
        "Xmatters": "diagrams.saas.alerting.Xmatters"
    },
    "Analytics": {
        "Snowflake": "diagrams.saas.analytics.Snowflake",
        "Stitch": "diagrams.saas.analytics.Stitch"
    },
    "CDN": {
        "Akamai": "diagrams.saas.cdn.Akamai",
        "Cloudflare": "diagrams.saas.cdn.Cloudflare",
        "Fastly": "diagrams.saas.cdn.Fastly"
    },
    "Chat": {
        "Discord": "diagrams.saas.chat.Discord",
        "Line": "diagrams.saas.chat.Line",
        "Mattermost": "diagrams.saas.chat.Mattermost",
        "Messenger": "diagrams.saas.chat.Messenger",
        "RocketChat": "diagrams.saas.chat.RocketChat",
        "Slack": "diagrams.saas.chat.Slack",
        "Teams": "diagrams.saas.chat.Teams",
        "Telegram": "diagrams.saas.chat.Telegram"
    },
    "Communication": {
        "Twilio": "diagrams.saas.communication.Twilio"
    },
    "FileSharing": {
        "Nextcloud": "diagrams.saas.filesharing.Nextcloud"
    },
    "Identity": {
        "Auth0": "diagrams.saas.identity.Auth0",
        "Okta": "diagrams.saas.identity.Okta"
    },
    "Logging": {
        "Datadog": "diagrams.saas.logging.Datadog",  # DataDog (alias)
        "Newrelic": "diagrams.saas.logging.Newrelic",  # NewRelic (alias)
        "Papertrail": "diagrams.saas.logging.Papertrail"
    },
    "Media": {
        "Cloudinary": "diagrams.saas.media.Cloudinary"
    },
    "Recommendation": {
        "Recombee": "diagrams.saas.recommendation.Recombee"
    },
    "Social": {
        "Facebook": "diagrams.saas.social.Facebook",
        "Twitter": "diagrams.saas.social.Twitter"
    }
}

# Dictionary of cloud providers
CLOUD_PROVIDERS = {
    "AWS": AWS_COMPONENTS,
    "Azure": AZURE_COMPONENTS,
    "Alibaba Cloud": ALIBABACLOUD_COMPONENTS,
    "GCP": GCP_COMPONENTS,
    "Digital Ocean": DIGITALOCEAN_COMPONENTS,
    "Elastic": ELASTIC_COMPONENTS,
    "Firebase": FIREBASE_COMPONENTS,
    "Generic": GENERIC_COMPONENTS,
    "IBM": IBM_COMPONENTS,
    "K8S": K8S_COMPONENTS,
    "OCI": OCI_COMPONENTS,
    "On-Premises": ONPREM_COMPONENTS,
    "Open Stack": OPENSTACK_COMPONENTS,
    "Outscale": OUTSCALE_COMPONENTS,
    "Programming": PROGRAMMING_COMPONENTS,
    "SAAS": SAAS_COMPONENTS

}

def load_boilerplate_code(selected_providers):
    boilerplate = set()
    for provider in selected_providers:
        components = CLOUD_PROVIDERS[provider]
        for category in components:
            for component, import_path in components[category].items():
                boilerplate.add(import_path)
    return "\n".join(f"from {path} import {path.split('.')[-1]}" for path in sorted(boilerplate))

def preprocess_code(code):
    lines = code.split('\n')
    start_index = next((i for i, line in enumerate(lines) if line.startswith('from ') or line.startswith('import ')), 0)
    return '\n'.join(lines[start_index:])

def execute_diagram_code(code):
    with tempfile.TemporaryDirectory() as tmpdirname:
        try:
            filename = os.path.join(tmpdirname, "diagram")
            pattern = r'with Diagram\((.*?)\):'
            match = re.search(pattern, code, re.DOTALL)
            if match:
                args = match.group(1).strip().split(',')
                diagram_name = args[0].strip().strip('"\'"')
                new_args = f'"{diagram_name}", filename="{filename}", show=False, outformat="png"'
                modified_code = code.replace(match.group(0), f'with Diagram({new_args}):')
            else:
                raise ValueError("Could not find Diagram instantiation in the code")

            stdout_capture = StringIO()
            stderr_capture = StringIO()
            sys.stdout = stdout_capture
            sys.stderr = stderr_capture

            try:
                exec(modified_code)
            except Exception as e:
                st.error(f"An error occurred while executing the code: {str(e)}")
                st.error(f"Traceback: {traceback.format_exc()}")
                return None
            finally:
                sys.stdout = sys.__stdout__
                sys.stderr = sys.__stderr__

            generated_file = f"{filename}.png"
            if os.path.exists(generated_file):
                with open(generated_file, "rb") as f:
                    return BytesIO(f.read())
            else:
                st.error("No PNG file was created.")
                st.error(f"Stdout: {stdout_capture.getvalue()}")
                st.error(f"Stderr: {stderr_capture.getvalue()}")
                return None
        except Exception as e:
            st.error(f"Error executing the code: {str(e)}")
            st.error(f"Traceback: {traceback.format_exc()}")
            return None

def main():
    st.set_page_config(page_title="Multi-Cloud Architecture Diagram Generator", layout="wide")
    st.title("Multi-Cloud Architecture Diagram Generator")

    # Initialize session state
    if 'generated_code' not in st.session_state:
        st.session_state.generated_code = ""
    if 'generated_diagram' not in st.session_state:
        st.session_state.generated_diagram = None

    # Sidebar configuration (collapsed by default)
    st.sidebar.title("Diagram Configuration")
    with st.sidebar.expander("Show Configuration", expanded=False):
        diagram_name = st.text_input("Enter a name for your diagram:", "my_cloud_diagram")
        color_scheme = st.color_picker("Color Scheme", "#FF9900")  # AWS Orange
        layout_direction = st.selectbox("Layout Direction", ["LR", "TB", "RL", "BT"], index=0)  # Set LR as default

        # Multi-select for cloud providers
        selected_providers = st.multiselect(
            "Select Cloud Providers:",
            options=list(CLOUD_PROVIDERS.keys()),
            default=["AWS"]
        )

    # Main content area with an expandable container
    with st.expander("Describe Architecture and Edit Code", expanded=True):
        col1, col2 = st.columns(2)

        with col1:
            st.subheader("Describe Your Architecture")
            user_input = st.text_area(
                "Describe the cloud architecture you want to create:",
                "Example: Create a diagram with an AWS Application Load Balancer, two EC2 instances, and an RDS database. Include an Azure Virtual Machine connected to Azure SQL Database. Add a Google Cloud Storage bucket.",
                height=300
            )

            if st.button("Generate Initial Code"):
                with st.spinner("Generating initial cloud diagram code..."):
                    # Load boilerplate code for selected providers
                    boilerplate_code = load_boilerplate_code(selected_providers)

                    # Create a list of available components for the prompt
                    available_components = []
                    for provider in selected_providers:
                        for category in CLOUD_PROVIDERS[provider]:
                            available_components.extend(CLOUD_PROVIDERS[provider][category].keys())

                    prompt = f"""
                        Generate Python code using the 'diagrams' library to create a multi-cloud diagram based on the following description:

                        {user_input}

                        Use the following boilerplate code for imports:

                        {boilerplate_code}

                        Available cloud components: {', '.join(available_components)}

                        The code should:
                        1. Use the provided boilerplate code for imports.
                        2. Only use the available cloud components listed above.
                        3. Create a Diagram object with show=False and outformat="png".
                        4. Use appropriate nodes and edges to represent the described cloud architecture.
                        5. Include any necessary clusters or groupings to represent cloud concepts like VPCs, subnets, or availability zones.
                        6. Be complete and runnable, assuming the diagrams library is installed.
                        7. Handle multiple instances of the same component type by creating individual variables (e.g., ec2_1, ec2_2 instead of [EC2(), EC2()]).
                        8. Use individual >> operators for connections, not list-based connections.
                        9. Use the color scheme: {color_scheme}
                        10. Use the layout direction: {layout_direction}

                        Provide only the Python code without any introductory text or explanations.
                        Do not create or use a BytesIO object named 'output'.
                        The code should start with imports and end with the Diagram context manager (the 'with' statement).
                        """

                    try:
                        response = client.messages.create(
                            model="claude-3-opus-20240229",
                            max_tokens=2500,
                            temperature=0.5,
                            messages=[
                                {"role": "user", "content": prompt}
                            ]
                        )
                        generated_code = response.content[0].text.strip()
                        st.session_state.generated_code = preprocess_code(generated_code)
                    except Exception as e:
                        st.error(f"An error occurred while generating the initial code: {str(e)}")
                        st.error(f"Traceback: {traceback.format_exc()}")
                        st.session_state.generated_code = ""

        with col2:
            st.subheader("Edit or Write Python Code")
            user_code = st.text_area("Python Code", value=st.session_state.generated_code, height=300, key="user_code")

            if st.button("Generate Diagram"):
                if user_code:
                    with st.spinner("Generating diagram from code..."):
                        try:
                            img_bytes = execute_diagram_code(user_code)
                            if img_bytes:
                                st.session_state.generated_diagram = img_bytes
                            else:
                                st.error("Failed to generate the diagram. Please check your code and try again.")
                        except Exception as e:
                            st.error(f"An error occurred while generating the diagram: {str(e)}")
                            st.error(f"Traceback: {traceback.format_exc()}")
                else:
                    st.warning("Please enter some Python code to generate the diagram.")

    # Create a blank canvas for the generated diagram that spans both columns
    st.markdown("---")
    st.subheader("Generated Diagram")
    diagram_placeholder = st.empty()

    if st.session_state.generated_diagram:
        diagram_placeholder.image(st.session_state.generated_diagram.getvalue(), caption="Generated Multi-Cloud Architecture Diagram", use_column_width=True)

        b64 = base64.b64encode(st.session_state.generated_diagram.getvalue()).decode()
        href = f'<a href="data:image/png;base64,{b64}" download="{diagram_name}.png">Download Diagram</a>'
        st.markdown(href, unsafe_allow_html=True)

        export_package = BytesIO()
        export_package.write(b"Diagram:\n")
        export_package.write(st.session_state.generated_diagram.getvalue())
        export_package.write(b"\n\nCode:\n")
        export_package.write(user_code.encode())
        export_package.seek(0)
        st.download_button(
            label="Download Diagram and Code Package",
            data=export_package,
            file_name=f"{diagram_name}_package.txt",
            mime="text/plain"
        )
    else:
        diagram_placeholder.info("No diagram generated yet. Describe your architecture, generate the code, and click 'Generate Diagram' to create one.")

if __name__ == "__main__":
    main()
